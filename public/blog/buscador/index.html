<!DOCTYPE html>
<html lang="es-ES" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.136.5">
<title>Desarrollando un buscador para mi blog con Shiny | Basti√°n Olea</title>


<meta property="twitter:site" content="@bastimapache">
<meta property="twitter:creator" content="@bastimapache">







  
    
  
<meta name="description" content="En este post innecesariamente largo les comento mi irracional alegr√≠a de haber programado en R&#43;Shiny [un buscador para este mismo sitio](https://bastianoleah.shinyapps.io/buscador/) (funcionalidad que ya se estaba volviendo muy necesaria). En menos de media hora ya ten√≠a un producto m√≠nimo funcional gracias a lo simple que es programar con R. Esta funcionalidad nueva va a ayudar a poder encontrar posts sobre cualquier tema, sobre todo para m√≠, que uso este blog a diario para copiar y pegar mi propio c√≥digo üòÇ">


<meta property="og:site_name" content="Basti√°n Olea">
<meta property="og:title" content="Desarrollando un buscador para mi blog con Shiny | Basti√°n Olea">
<meta property="og:description" content="En este post innecesariamente largo les comento mi irracional alegr√≠a de haber programado en R&#43;Shiny [un buscador para este mismo sitio](https://bastianoleah.shinyapps.io/buscador/) (funcionalidad que ya se estaba volviendo muy necesaria). En menos de media hora ya ten√≠a un producto m√≠nimo funcional gracias a lo simple que es programar con R. Esta funcionalidad nueva va a ayudar a poder encontrar posts sobre cualquier tema, sobre todo para m√≠, que uso este blog a diario para copiar y pegar mi propio c√≥digo üòÇ" />
<meta property="og:type" content="page" />
<meta property="og:url" content="https://bastianoleah.netlify.app/blog/buscador/" />
<meta property="og:locale" content="es-ES">




    
        <meta property="og:image" content="https://bastianoleah.netlify.app/blog/buscador/buscador-featured.png" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://bastianoleah.netlify.app/blog/buscador/buscador-featured.png" >
    
    
  
  <meta itemprop="name" content="Desarrollando un buscador para mi blog con Shiny">
  <meta itemprop="description" content="√çndice Generando el √≠ndice de b√∫squeda Obteniendo los datos del sitio Implementando la b√∫squeda Desarrollando la aplicaci√≥n Obtener datos desde la app B√∫squeda desde la app Salida de los resultados de b√∫squeda Apariencia de la app Conclusi√≥n Este blog ya lleva m√°s de 100 publicaciones! üéâ y si bien uso las etiquetas para mantener todo organizado y ayudar a descubrir nuevos posts, a veces hasta a mi me cuesta encontrar publicaciones entre tanta cosa üòÖ">
  <meta itemprop="datePublished" content="2025-11-11T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-11-11T00:00:00+00:00">
  <meta itemprop="wordCount" content="2017">
  <meta itemprop="image" content="https://bastianoleah.netlify.app/blog/buscador/buscador-featured.png">
  <meta itemprop="keywords" content="Blog,Shiny">
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="false" type="image/x-icon">
  <link rel="icon" href="false" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.05c2dee644e65ea536a58bc8edefe21b071855219e5bd2807cc6c59fa8998621.css" integrity="sha256-BcLe5kTmXqU2pYvI7e/iGwcYVSGeW9KAfMbFn6iZhiE=" media="screen">
  
  
  <script src="/panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script>
  
  
  <script src="/main.min.26a7606c1bee1310cdae7196cfade9ba0a2a95bff0c4f9cc2156609ec0d0326a.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://bastianoleah.netlify.app/" title="Home">
      <img src="/img/logo.png" class="dib db-l h2 w-auto" alt="Basti√°n Olea">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/blog/" title="Basti√°n Olea: Blog de R">Blog</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://bastianoleah.shinyapps.io/buscador/" title="Buscador">Buscar</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://bastianolea.github.io/shiny_apps/" title="Apps">Apps</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://bastianolea.github.io/datos_sociales/" title="Datos">Datos</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/tags/" title="Temas">Temas</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/categories/tutoriales/" title="Tutoriales">Tutoriales</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/blog/r_introduccion/" title="Aprender R">Aprender</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/clases/" title="Clases">Clases</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/blog/r_introduccion/recursos_r/" title="Recursos">Enlaces</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="Basti√°n Olea: Sobre mi">Yo</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/contacto/" title="Contacto">Contacto</a>
      
      
      
      <div class="dib v-mid", style = "padding: 4px; margin-top: 4px;">
        <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bastianoleah.shinyapps.io/buscador/" title="search" target="_blank" rel="me noopener">
      <i class="fas fa-search fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/bastianolea" title="github" target="_blank" rel="me noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://x.com/bastimapache" title="twitter" target="_blank" rel="me noopener">
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/bastianolea/" title="linkedin" target="_blank" rel="me noopener">
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.tiktok.com/@bastimapache" title="tiktok" target="_blank" rel="me noopener">
      <i class="fab fa-tiktok fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.instagram.com/raccunnie" title="instagram" target="_blank" rel="me noopener">
      <i class="fab fa-instagram fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.goodreads.com/user/show/53224910-basti-n-olea-herrera" title="goodreads" target="_blank" rel="me noopener">
      <i class="fab fa-goodreads fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.last.fm/user/bastimapache" title="lastfm" target="_blank" rel="me noopener">
      <i class="fab fa-lastfm fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bsky.app/profile/bastianolea.rbind.io" title="bluesky" target="_blank" rel="me noopener">
      <i class="fab fa-bluesky fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/contacto/" title="envelope" >
      <i class="fas fa-envelope fa-lg fa-fw"></i>
    </a>
  
</div>

      </div>
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">Desarrollando un buscador para mi blog con Shiny</h1>
        
        
        <span><div class="f7 db mv0 ttu" style="display:inline-block;">11/11/2025 </div>
        
        
        <span>



<span style="font-size: 79%; opacity: 100%; margin-left: 6px;">
<span id="ee119345b962a345d56302644e546db3" title="visitas">
</span>
<script>
    var r = new XMLHttpRequest();
    r.addEventListener('load', function() {
        document.getElementById('ee119345b962a345d56302644e546db3').innerText = JSON.parse(this.responseText).count_unique + ' ' + 'visitas'
    })
    r.open('GET', "https://bastimapache.goatcounter.com/counter/" + encodeURIComponent("/blog/buscador/".replace(/(\/)?$/, '')) + '.json')
    r.send()
</script>
</span></span>
        </span>
        
        
        
        
  <dl class="f6 lh-copy">
    <em><dd class="fw5 ml0"> <a href="https://bastianoleah.netlify.app/tags/blog"
    style="margin-right: 2px; 
                 color: #EAD2FA; 
                 font-style: normal;
                 text-decoration: none;
                 font-size: 10pt;
                 background-color: #9069C0; 
                 border-radius: 3px; 
                 padding: 2px 6px; ">
      blog</a>  <a href="https://bastianoleah.netlify.app/tags/shiny"
    style="margin-right: 2px; 
                 color: #EAD2FA; 
                 font-style: normal;
                 text-decoration: none;
                 font-size: 10pt;
                 background-color: #9069C0; 
                 border-radius: 3px; 
                 padding: 2px 6px; ">
      Shiny</a> </dd></em>
  </dl>
 
        
      
      <div class="ph0 pt2">
        


    
    
    
      
    
    
    
    
    
      
      
  <a class="btn-links mr2 ba dib" 
  style = "background-color: #9069C0; border-radius: 4px; 
  color: #EAD2FA; font-size: 9pt;
  padding-top: 9px; padding-bottom: 6px; padding-left: 9px; padding-right: 10px; 
  margin-right: 1px; margin-top: -6px; margin-bottom: 0px;"
  href="https://github.com/bastianolea/blog_buscador" target="_blank" rel="noopener"><i class="fab fa-github fa-lg fa-fw mr2"></i>C√≥digo</a>

    
    
    
      
    
    
    
    
    
      
      
  <a class="btn-links mr2 ba dib" 
  style = "background-color: #9069C0; border-radius: 4px; 
  color: #EAD2FA; font-size: 9pt;
  padding-top: 9px; padding-bottom: 6px; padding-left: 9px; padding-right: 10px; 
  margin-right: 1px; margin-top: -6px; margin-bottom: 0px;"
  href="https://bastianoleah.shinyapps.io/buscador/" target="_blank" rel="noopener"><i class="fas fa-link fa-lg fa-fw mr2"></i>Aplicaci√≥n</a>


      </div>
      

      </header>
      <section class="post-body pt5 pb4">
        <a href="buscador-featured.png" target="_blank">

  <img src="buscador-featured.png" style="border-radius: 5px; width: 80%; max-width: 700px; display: block; margin: auto; margin-bottom: 8px; margin-top: 8px;">
  
</a>
<div style = "margin-left: -16px;">
  
  <details open id="PageTableOfContents">
    <summary>
      <h2 class="mv0 f5 fw7 ttu tracked dib" style = "margin-left: 6px; font-size: 120%;">√çndice</h2>
      </summary>
    <div class="pl2 pr0 mh0" style = "margin-top: -8px; margin-left: 12px; margin-bottom: 32px;">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#generando-el-√≠ndice-de-b√∫squeda">Generando el √≠ndice de b√∫squeda</a></li>
    <li><a href="#obteniendo-los-datos-del-sitio">Obteniendo los datos del sitio</a></li>
    <li><a href="#implementando-la-b√∫squeda">Implementando la b√∫squeda</a></li>
    <li><a href="#desarrollando-la-aplicaci√≥n">Desarrollando la aplicaci√≥n</a>
      <ul>
        <li><a href="#obtener-datos-desde-la-app">Obtener datos desde la app</a></li>
        <li><a href="#b√∫squeda-desde-la-app">B√∫squeda desde la app</a></li>
        <li><a href="#salida-de-los-resultados-de-b√∫squeda">Salida de los resultados de b√∫squeda</a></li>
        <li><a href="#apariencia-de-la-app">Apariencia de la app</a></li>
      </ul>
    </li>
    <li><a href="#conclusi√≥n">Conclusi√≥n</a></li>
  </ul>
</nav>
    </div>
  </details>
  
</div>
<p>Este blog ya lleva m√°s de 100 publicaciones! üéâ y si bien 
<a href="/tags/">uso las etiquetas</a> para mantener todo organizado y ayudar a descubrir nuevos posts, a veces hasta a mi me cuesta encontrar publicaciones entre tanta cosa üòÖ</p>
<p>Por esa raz√≥n hace tiempo que quer√≠a <strong>implementar 
<a href="https://bastianoleah.shinyapps.io/buscador/" target="_blank" rel="noopener">un buscador</a> en este sitio</strong>, cosa que result√≥ ser m√°s complicada de lo que esperaba. Pero lo logr√©, y estoy irracionalmente feliz por eso üíú</p>
<blockquote>
<p>Algo hermoso de programar es la sensaci√≥n de logro y orgullo que provoca poder crear cosas bonitas y que funcionan! ‚ú®</p>
</blockquote>
<p>Pero les cuento la historia. Pasa que <del>lamentablemente</del><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> decid√≠ 
<a href="https://bastianolea.rbind.io/blog/hugo_blog_nuevo/" target="_blank" rel="noopener">hacer este blog con Hugo</a> en vez de con Quarto, que recientemente se ha vuelto una 
<a href="/blog/tutorial_quarto_github_pages/">excelente herramienta para crear blogs y sitios web</a>. Quarto 
<a href="https://quarto.org/docs/websites/website-search.html" target="_blank" rel="noopener">viene con buscador implementado</a>, pero en Hugo <strong>hab√≠a que implementarlo a mano</strong>. Y si bien encontr√© un tutorial muy completo para implementar b√∫squedas con LunrJS en Hugo, 
<a href="https://aaronluna.dev/blog/add-search-to-static-site-lunrjs-hugo-vanillajs/" target="_blank" rel="noopener">era realmente largu√≠simo y complicado</a> üò£ As√≠ que me rend√≠.</p>
<p>Pero resulta que, cuando estaba intentando seguir ese tutorial, not√© que en los primeros pasos se configuraba Hugo para <strong>generar un <em>indice</em> del blog</strong> en formato JSON. Un √≠ndice del sitio es un documento de texto que contiene <em>todo</em> el contenido de tu sitio web. El resto del tutorial era sobre usar ese √≠ndice para implementar la b√∫squeda. Entonces qued√© pensando‚Ä¶ ü§î</p>
<p>Despu√©s de semanas de darle vuelta a la frustraci√≥n de no haberlo logrado, decid√≠ hacerlo a mi manera, y me puse a hacer una app 
<a href="/tags/shiny/">Shiny</a> con R que usara el √≠ndice para buscar contenido y entregar resultados. <strong>¬øQu√© tan dif√≠cil pod√≠a ser?</strong> ü´¢</p>
<p>Resulta que nada de dif√≠cil. En menos de una hora ya ten√≠a un producto funcional!</p>




<h2 id="generando-el-√≠ndice-de-b√∫squeda">Generando el √≠ndice de b√∫squeda
  <a href="#generando-el-%c3%adndice-de-b%c3%basqueda"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>El primer paso para el buscador fue hacer que mi blog generara un √≠ndice de su contenido para poder buscarlo. Esto que usualmente es complejo, porque implica instalar programas que se corren regularmente para re-generar el √≠ndice, con Hugo se hace facilito porque viene integrado en su forma de funcionar.</p>


<details>
  <summary><strong>Ver c√≥digo e instrucciones para crear el √≠ndice</strong></summary>
  <p>Simplemente hab√≠a que agregar al <code>config.toml</code> (archivo de configuraci√≥n del sitio) que, adem√°s de HTML y XML, genere un output JSON del sitio. Luego, en una plantilla, decirle qu√© queremos que contenga el sitio.</p>
<p>En <code>config.toml</code>, agregar al final estas l√≠neas:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#908caa">[</span><span style="color:#ea9a97">outputs</span><span style="color:#908caa">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">home</span> <span style="color:#908caa">=</span> <span style="color:#908caa">[</span><span style="color:#f6c177">&#34;HTML&#34;</span><span style="color:#908caa">,</span> <span style="color:#f6c177">&#34;RSS&#34;</span><span style="color:#908caa">,</span> <span style="color:#f6c177">&#34;JSON&#34;</span><span style="color:#908caa">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">page</span> <span style="color:#908caa">=</span> <span style="color:#908caa">[</span><span style="color:#f6c177">&#34;HTML&#34;</span><span style="color:#908caa">]</span>
</span></span></code></pre></div><p>Luego, crear un archivo <code>index.json</code> en la carpeta <code>layouts</code> para decirle que queremos que el JSON contenga t√≠tulo, enlace, fecha, etiquetas, y el texto completo de cada post:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- $.Scratch.Add &#34;pagesIndex&#34; slice -}}
</span></span><span style="display:flex;"><span>{{- range $index, $page := .Site.Pages -}}
</span></span><span style="display:flex;"><span>  {{- if in (slice &#34;post&#34; &#34;blog&#34; &#34;tutoriales&#34;) $page.Type -}}
</span></span><span style="display:flex;"><span>    {{- if gt (len $page.Content) 0 -}}
</span></span><span style="display:flex;"><span>      {{- $pageData := (dict &#34;title&#34; $page.Title &#34;href&#34; $page.Permalink &#34;date&#34; $page.Params.Date &#34;tags&#34; (delimit (default (slice) $page.Params.tags) &#34; ; &#34;) &#34;content&#34; $page.Plain) -}}
</span></span><span style="display:flex;"><span>      {{- $.Scratch.Add &#34;pagesIndex&#34; $pageData -}}
</span></span><span style="display:flex;"><span>    {{- end -}}
</span></span><span style="display:flex;"><span>  {{- end -}}
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span><span style="display:flex;"><span>{{- $.Scratch.Get &#34;pagesIndex&#34; | jsonify -}}
</span></span></code></pre></div><p>Finalmente, reconstruimos el sitio ejecutando <code>blogdown::build_site()</code>. En la carpeta <code>public</code> va a aparecer el archivo <code>index.json</code>.</p>

</details>
<p>La gracia es que <strong>el √≠ndice se construye y actualiza solito</strong>, sin depender de otros programas ni instalar nada. Adem√°s, este √≠ndice queda expuesto a la internet, por lo que se puede acceder a √©l por la url 
<a href="https://bastianolea.rbind.io/index.json" target="_blank" rel="noopener">https://bastianolea.rbind.io/index.json</a></p>
<p>Entonces, sin necesidad de web scraping ni APIs, pod√≠a hacer una app que leyera directamente los datos del sitio üò±</p>




<h2 id="obteniendo-los-datos-del-sitio">Obteniendo los datos del sitio
  <a href="#obteniendo-los-datos-del-sitio"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Empec√© con las primeras pruebas.</p>
<p>Antes de hacer lo del √≠ndice JSON, primero empec√© leyendo el √≠ndice XML, con el paquete <code>{xml2}</code> le√≠a la direcci√≥n con <code>read_xml()</code>, y usando <code>xml_find_all()</code> iba apuntando a los elementos del √≠ndice para crear un dataframe. Pero pronto me di cuenta de que ese √≠ndice no ten√≠a el texto completo de los posts, y tampoco le√≠a el c√≥digo de los posts.</p>
<p>As√≠ que implement√© el √≠ndice en JSON, y con el paquete <code>{jsonlite}</code> y la funci√≥n <code>fromJSON()</code> pude obtener directamente un dataframe desde el √≠ndice, sin pasos intermedios como con la versi√≥n XML.</p>
<p>As√≠ que hice una funci√≥n <code>procesar_json()</code> que fue m√°s o menos as√≠:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">obtener</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">sitio</span> <span style="color:#908caa">|&gt;</span> <span style="color:#ea9a97">jsonlite</span><span style="color:#908caa">::</span><span style="color:#ea9a97">fromJSON</span><span style="color:#908caa">()</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">datos</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">obtener</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">tibble</span><span style="color:#908caa">()</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">mutate</span><span style="color:#908caa">(</span><span style="color:#ea9a97">texto</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">limpiar_html</span><span style="color:#908caa">(</span><span style="color:#ea9a97">texto</span><span style="color:#908caa">))</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">mutate</span><span style="color:#908caa">(</span><span style="color:#ea9a97">fecha</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">extraer_fechas</span><span style="color:#908caa">(</span><span style="color:#ea9a97">fecha</span><span style="color:#908caa">))</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">mutate</span><span style="color:#908caa">(</span><span style="color:#ea9a97">link</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">corregir_enlace</span><span style="color:#908caa">(</span><span style="color:#ea9a97">link</span><span style="color:#908caa">))</span>
</span></span></code></pre></div><p>Con esto ya ten√≠a un dataframe con las m√°s de 100 publicaciones.</p>




<h2 id="implementando-la-b√∫squeda">Implementando la b√∫squeda
  <a href="#implementando-la-b%c3%basqueda"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Existen muchos servicios y paquetes especializados en b√∫squeda‚Ä¶ pero yo no soy inform√°ticx ni quer√≠a complicarme. ¬øQu√© tan malo pod√≠a ser 
<a href="https://bastianolea.rbind.io/blog/stringr_texto/" target="_blank" rel="noopener">usar <code>{stringr}</code> para detectar texto</a> y hacerlo pasar por motor de b√∫squeda? ü§î</p>
<p>Resulta que nada de malo üòå Los resultados de <code>str_detect()</code> no son para nada lentos, sobre todo cuando estamos hablando de apenas cientos de observaciones, cada una con apenas unas miles de palabras.</p>
<p>As√≠ que implementar la b√∫squeda fue tan sencillo como:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">busqueda</span> <span style="color:#908caa">&lt;-</span> <span style="color:#f6c177">&#34;waldo&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">resultado</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">datos</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">filter</span><span style="color:#908caa">(</span><span style="color:#ea9a97">str_detect</span><span style="color:#908caa">(</span><span style="color:#ea9a97">texto</span><span style="color:#908caa">,</span> <span style="color:#ea9a97">busqueda</span><span style="color:#908caa">))</span>
</span></span></code></pre></div><p>Y listo. Se obtiene el dataframe filtrado, limpio, bonito. Literalmente <strong>desde la obtenci√≥n de los datos a los resultados de b√∫squeda en menos de 50 l√≠neas</strong> de c√≥digo. No hay mucho m√°s que agregar, aguante R üòÇ</p>




<h2 id="desarrollando-la-aplicaci√≥n">Desarrollando la aplicaci√≥n
  <a href="#desarrollando-la-aplicaci%c3%b3n"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>En resumen, la app es b√°sicamente:</p>
<ul>
<li>Un input de texto libre para las b√∫squedas con <code>textInput()</code></li>
<li>Un <code>reactive()</code> que cargue los datos del √≠ndice <code>index.json</code> alojado en mi sitio</li>
<li>Otro <code>rective()</code> que filtre estos datos en base al texto de b√∫squeda</li>
<li>Un output de texto que diga la cantidad de resultados</li>
<li>Un output de HTML para los resultados construidos en base a los datos</li>
<li>Amononar el UI de la app para que combine con mi sitio, usando <code>bs_theme()</code> para 
<a href="https://bastianolea.rbind.io/blog/shiny_temas/" target="_blank" rel="noopener">encargarse del tema del sitio</a> y una hoja de estilos CSS</li>
</ul>




<h3 id="obtener-datos-desde-la-app">Obtener datos desde la app
  <a href="#obtener-datos-desde-la-app"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>En la obtenci√≥n de datos del sitio solamente puse la funci√≥n <code>procesar_json()</code>. Esto implica, naturalmente, la carga (o descarga) del √≠ndice, que como tiene tanto texto puede pesar un par de megas.</p>
<p>Este ser√≠a el √∫nico *<em>cuello de botella</em> de la app, as√≠ que 
<a href="/blog/shiny_optimizar/">le puse un <code>bindCache()</code> para que se guarden los resultados en la app</a>, acelerando la carga del √≠ndice y disminuyendo el impacto en el servidor del sitio, y le puse que el cache durara una hora (usando como <em>llave</em> del cache la fecha/hora del d√≠a redondeada a la hora con <code>floor_date()</code>)</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span> <span style="color:#6e6a86"># obtener datos del sitio</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">sitio</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">reactive</span><span style="color:#908caa">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">message</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;obteniendo sitio...&#34;</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">procesar_json</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;https://bastianolea.rbind.io/index.json&#34;</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#908caa">})</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#6e6a86"># guardar cache por hora</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">bindCache</span><span style="color:#908caa">(</span><span style="color:#ea9a97">floor_date</span><span style="color:#908caa">(</span><span style="color:#ea9a97">now</span><span style="color:#908caa">(),</span> <span style="color:#ea9a97">unit</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;hours&#34;</span><span style="color:#908caa">))</span>
</span></span></code></pre></div>



<h3 id="b√∫squeda-desde-la-app">B√∫squeda desde la app
  <a href="#b%c3%basqueda-desde-la-app"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>La b√∫squeda es literal un <code>filter(str_detect(texto, input$busqueda))</code>, que retorna un objeto reactivo con el dataframe filtrado por las coincidencias.</p>
<p>Se pone un <code>debounce()</code> para que lo que el usuario escriba no se busque a cada rato, sino que se esperen que el input se quede quieto 300 milisegundos antes de empezar la b√∫squeda.</p>
<p>Para el texto de los resultados us√© <code>cli::pluralize()</code> para 
<a href="/blog/2025-10-21b/">escribir texto singular o plural autom√°ticamente</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">pluralize</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;Se encontr{?√≥/aron} {n} publicaci{?√≥n/ones}:&#34;</span><span style="color:#908caa">)</span>
</span></span></code></pre></div>



<h3 id="salida-de-los-resultados-de-b√∫squeda">Salida de los resultados de b√∫squeda
  <a href="#salida-de-los-resultados-de-b%c3%basqueda"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Finalmente, teniendo un dataframe con los resultados de b√∫squeda, no puedo solamente mostrar una tabla con t√≠tulos y enlaces. As√≠ que viene la parte m√°s compleja: <strong>generar el c√≥digo HTML en base a los datos</strong> para mostrar los resultados de b√∫squeda con una interfaz personalizada.</p>
<p>Se trata de un <code>output</code> de HTML, que naturalmente requiere (<code>req()</code>) que el usuario haya buscado algo y existan resultados:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">output</span><span style="color:#908caa">$</span><span style="color:#ea9a97">resultados</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">renderUI</span><span style="color:#908caa">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">req</span><span style="color:#908caa">(</span><span style="color:#ea9a97">termino</span><span style="color:#908caa">()</span> <span style="color:#908caa">!=</span> <span style="color:#f6c177">&#34;&#34;</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">req</span><span style="color:#908caa">(</span><span style="color:#ea9a97">n_resultados</span><span style="color:#908caa">()</span> <span style="color:#908caa">&gt;</span> <span style="color:#f6c177">0</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#3e8fb0">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#908caa">})</span>
</span></span></code></pre></div><p>Luego, mi <strong>truco</strong> (o mala pr√°ctica?) <strong>favorito</strong>: separar un dataframe por filas para meterlas a un loop de <code>purrr::map()</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#6e6a86"># separar resultados</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">elementos</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">busqueda</span><span style="color:#908caa">()</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">mutate</span><span style="color:#908caa">(</span><span style="color:#ea9a97">id</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">row_number</span><span style="color:#908caa">())</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">split</span><span style="color:#908caa">(</span><span style="color:#908caa">~</span><span style="color:#ea9a97">id</span><span style="color:#908caa">)</span>
</span></span></code></pre></div><p>Con este c√≥digo conviertes un dataframe en una <strong>lista</strong> donde cada elemento de la lista es un dataframe de una fila.</p>
<p>Entonces, por cada <strong>resultado de b√∫squeda</strong> (un elemento de la lista que contiene una fila del dataframe), lo metemos a una funci√≥n donde definimos qu√© hacemos con las variables asociadas a cada resultado.</p>
<a href="buscador-map.png" target="_blank">

  <img src="buscador-map.png" style="border-radius: 5px; width: 80%; max-width: 700px; display: block; margin: auto; margin-bottom: 8px; margin-top: 8px;">
  
</a>
<p>En el siguiente loop, cada elemento de los resultados se llama <code>elemento</code>, y como es un dataframe de una fila, con <code>$</code> extraemos sus variables como <code>titulo</code>, <code>link</code>, etc., y <strong>las vamos ubicando libremente</strong> en un <code>div()</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">map</span><span style="color:#908caa">(</span><span style="color:#ea9a97">elementos</span><span style="color:#908caa">,</span> <span style="color:#ea9a97">\</span><span style="color:#908caa">(</span><span style="color:#ea9a97">elemento</span><span style="color:#908caa">)</span> <span style="color:#908caa">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">div</span><span style="color:#908caa">(</span><span style="color:#ea9a97">class</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;resultado&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#6e6a86"># t√≠tulo con link</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ea9a97">a</span><span style="color:#908caa">(</span><span style="color:#ea9a97">href</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">elemento</span><span style="color:#908caa">$</span><span style="color:#ea9a97">link</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ea9a97">target</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;_blank&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ea9a97">h3</span><span style="color:#908caa">(</span><span style="color:#ea9a97">elemento</span><span style="color:#908caa">$</span><span style="color:#ea9a97">titulo</span><span style="color:#908caa">)),</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#6e6a86"># fecha</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ea9a97">div</span><span style="color:#908caa">(</span><span style="color:#ea9a97">class</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;fecha&#34;</span><span style="color:#908caa">,</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#ea9a97">elemento</span><span style="color:#908caa">$</span><span style="color:#ea9a97">fecha</span><span style="color:#908caa">),</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#6e6a86"># etiquetas con links</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ea9a97">div</span><span style="color:#908caa">(</span><span style="color:#ea9a97">class</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;contenedor_etiquetas&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ea9a97">etiquetas</span><span style="color:#908caa">(</span><span style="color:#ea9a97">elemento</span><span style="color:#908caa">$</span><span style="color:#ea9a97">tags</span><span style="color:#908caa">)),</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#6e6a86"># separador</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ea9a97">hr</span><span style="color:#908caa">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span><span style="color:#908caa">})</span>
</span></span></code></pre></div><p>Me gusta esta forma de hacerlo, porque es como llegar al c√≥digo HTML con un dataframe de una fila y varias columnas, b√°sicamente una lista con varios elementos, y voy decidiendo qu√© hago con cada elemento en la interfaz que va a crearse. Es como mezclar el UI y el server de Shiny en un mismo proceso.</p>
<p>La √∫nica parte complicada de esto es el c√≥digo para las etiquetas o <em>tags</em>, que como pueden ser m√°s de una, cre√© la funci√≥n <code>etiquetas()</code> para ponerlas como rectangulitos una al lado de la otra:</p>


<details>
  <summary><strong>Ver c√≥digo</strong></summary>
  <div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6e6a86"># texto de etiquetas separado por punto y comas</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">etiquetas</span> <span style="color:#908caa">&lt;-</span> <span style="color:#3e8fb0">function</span><span style="color:#908caa">(</span><span style="color:#ea9a97">tag</span><span style="color:#908caa">)</span> <span style="color:#908caa">{</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">elementos</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">tag</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#6e6a86"># separar porque es un puro texto delimitado por &#34;;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">str_split</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;;&#34;</span><span style="color:#908caa">)</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">unlist</span><span style="color:#908caa">()</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#6e6a86"># eliminar espacios entre t√©rminos</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">str_trim</span><span style="color:#908caa">()</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#6e6a86"># por cada elemento, crear un &lt;div&gt; con el texto y un enlace</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">map</span><span style="color:#908caa">(</span><span style="color:#ea9a97">elementos</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#908caa">~</span><span style="color:#ea9a97">div</span><span style="color:#908caa">(</span><span style="color:#ea9a97">class</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;etiquetas&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>           <span style="color:#6e6a86"># enlace</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ea9a97">a</span><span style="color:#908caa">(</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ea9a97">div</span><span style="color:#908caa">(</span><span style="color:#ea9a97">.x</span><span style="color:#908caa">,</span> <span style="color:#ea9a97">class</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;texto_etiquetas&#34;</span><span style="color:#908caa">),</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ea9a97">href</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">paste0</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;https://bastianolea.rbind.io/tags/&#34;</span><span style="color:#908caa">,</span> 
</span></span><span style="display:flex;"><span>                           <span style="color:#ea9a97">str_replace_all</span><span style="color:#908caa">(</span><span style="color:#ea9a97">.x</span><span style="color:#908caa">,</span> <span style="color:#f6c177">&#34; &#34;</span><span style="color:#908caa">,</span> <span style="color:#f6c177">&#34;-&#34;</span><span style="color:#908caa">)),</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ea9a97">target</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;_blank&#34;</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#908caa">))</span>
</span></span><span style="display:flex;"><span><span style="color:#908caa">}</span>
</span></span></code></pre></div>
</details>
<a href="buscador-tags.png" target="_blank">

  <img src="buscador-tags.png" style="border-radius: 5px; width: 80%; max-width: 700px; display: block; margin: auto; margin-bottom: 8px; margin-top: 8px;">
  
</a>




<h3 id="apariencia-de-la-app">Apariencia de la app
  <a href="#apariencia-de-la-app"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Ninguna aplicaci√≥n ser√≠a nada si no cuidamos su apartado est√©tico. En la interfaz de la aplicaci√≥n primero 
<a href="https://bastianolea.rbind.io/blog/shiny_temas/" target="_blank" rel="noopener">definimos un tema de colores y tipograf√≠as</a> con <code>{bslib}</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#6e6a86"># tema</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">theme</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">bs_theme</span><span style="color:#908caa">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">fg</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;#553A74&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">bg</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;#EAD1FA&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">primary</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;#6E3A98&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">font_scale</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">1.1</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">base_font</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">font_google</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;Atkinson Hyperlegible&#34;</span><span style="color:#908caa">),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">heading_font</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">font_google</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;EB Garamond&#34;</span><span style="color:#908caa">),</span>
</span></span><span style="display:flex;"><span>  <span style="color:#908caa">)</span>
</span></span></code></pre></div><p>Luego podemos afinar los detalles con una <strong>hoja de estilos CSS</strong>. CSS es el lenguaje usado para definir la apariencia de toda p√°gina web. Esto es un archivo <code>styles.css</code> que cargamos a la interfaz de la app con <code>includeCSS(&quot;styles.css&quot;)</code>.</p>
<p>Mientras hacemos la interfaz de la app, ya sea en UI o dentro de una funci√≥n como el <code>map()</code> que vimos antes, cuando definimos un <code>div()</code>, en el argumento <code>class</code> creamos <strong>clases</strong> CSS que luego usaremos para hacer que cada elemento tenga la apariencia deseada en <code>styles.css</code>.</p>
<p>Entonces, en la hoja de estilo le damos apariencia a las clases que fuimos creando en la app, por ejemplo:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#6e6a86">/* estilo de t√≠tulo de resultados */</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">h3</span> <span style="color:#908caa">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#3e8fb0">color</span><span style="color:#908caa">:</span> <span style="color:#f6c177">#9069C0</span><span style="color:#908caa">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#3e8fb0">font-size</span><span style="color:#908caa">:</span> <span style="color:#f6c177">24</span><span style="color:#3e8fb0">px</span><span style="color:#908caa">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#3e8fb0">font-weight</span><span style="color:#908caa">:</span> <span style="color:#f6c177">700</span><span style="color:#908caa">;</span>
</span></span><span style="display:flex;"><span><span style="color:#908caa">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6e6a86">/* estilo de textos de fechas */</span>
</span></span><span style="display:flex;"><span><span style="color:#908caa">.</span><span style="color:#9ccfd8">fecha</span> <span style="color:#908caa">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#3e8fb0">font-size</span><span style="color:#908caa">:</span> <span style="color:#f6c177">12</span><span style="color:#3e8fb0">px</span><span style="color:#908caa">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#3e8fb0">margin-bottom</span><span style="color:#908caa">:</span> <span style="color:#f6c177">4</span><span style="color:#3e8fb0">px</span><span style="color:#908caa">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#3e8fb0">margin-top</span><span style="color:#908caa">:</span> <span style="color:#f6c177">-4</span><span style="color:#3e8fb0">px</span><span style="color:#908caa">;</span>
</span></span><span style="display:flex;"><span><span style="color:#908caa">}</span>
</span></span></code></pre></div><p>Finalmente afinamos un detallito de la app: con 
<a href="https://github.com/daattali/shinydisconnect" target="_blank" rel="noopener">el paquete <code>{shinydisconnect}</code></a> de Dean Attali podemos personalizar el mensaje de desconexi√≥n de la app para que les usaries entiendan mejor que la app requiere recargarse.</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#6e6a86"># mensaje en caso de desconexi√≥n</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">disconnectMessage</span><span style="color:#908caa">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">background</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;#EAD1FA&#34;</span><span style="color:#908caa">,</span> <span style="color:#ea9a97">colour</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;#553A74&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">refreshColour</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;#9069C0&#34;</span><span style="color:#908caa">,</span> <span style="color:#ea9a97">overlayColour</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;#553A74&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">size</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">14</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">text</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;La aplicaci√≥n se desconect√≥. Vuelve a cargar la p√°gina.&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ea9a97">refresh</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;Volver a cargar&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#908caa">),</span>
</span></span></code></pre></div><p>Esto pasa porque, como las apps Shiny tienen un servidor detr√°s, no pueden estar conectadas por siempre, y luego de un tiempo de inactividad se desconectan. Por ejemplo, si el usuario de la app se va a un resultado de b√∫squeda y despu√©s aprieta <em>atr√°s</em> en el navegador, la app podr√≠a haberse desconectado al detectar que el usuario <em>se fue</em>.</p>




<h2 id="conclusi√≥n">Conclusi√≥n
  <a href="#conclusi%c3%b3n"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Acabo de contar, y en total (<code>app.R</code> + <code>funciones.R</code>) la app tiene exactamente 300 l√≠neas de c√≥digo, que 
<a href="https://github.com/bastianolea/blog_buscador" target="_blank" rel="noopener">puedes trajinear en su repositorio</a>. Me alegra mucho haber resuelto tan r√°pido este problema que ten√≠a con el sitio, y el resultado se ve lindo y es funcional ü•∞</p>
<blockquote>
<p>Si llegaste hasta aqu√≠ leyendo, muchas gracias üíú An√≠mate a aprender a programar para que tambi√©n hagas cosas √∫tiles y bonitas!</p>
</blockquote>

<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Muchxs usuarixs de R est√°n migrando sus blogs 
<a href="https://github.com/hugo-apero/" target="_blank" rel="noopener">Hugo Ap√©ro</a> a Quarto, principalmente porque Quarto tiene muchas m√°s funcionalidades integradas y permite hacer blogs con c√≥dgio de R con much√≠simas cosas que Hugo no tiene, como pesta√±as, notas al margen, estilos y m√°s.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Fecha de publicaci√≥n:</dt>
    <dd class="fw5 ml0">November 11, 2025</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Extensi√≥n:</dt>
    <dd class="fw5 ml0">10 minute read, 2017 words</dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Tags:</dt>
    <dd class="fw5 ml0"> <a href="https://bastianoleah.netlify.app/tags/blog">blog</a>  <a href="https://bastianoleah.netlify.app/tags/shiny">Shiny</a> </dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Ver tambi√©n:</dt>
    
    <dd class="fw5 ml0"><a href="/blog/2025-11-14/">Actualizaci√≥n: plataforma de visualizaci√≥n de estad√≠sticas delictuales</a></dd>
    
    <dd class="fw5 ml0"><a href="/blog/mapas_areas_metropolitanas/">Portafolio: mapas de √Åreas Metropolitanas</a></dd>
    
    <dd class="fw5 ml0"><a href="/blog/2025-11-13/">¬øPor qu√© programar para trabajar con datos?</a></dd>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="https://bastianoleah.netlify.app/blog/2025-11-13/">&larr; ¬øPor qu√© programar para trabajar con datos?</a>
  
  
  
    <a class="next dtc pl2 tr v-top fw6"
    href="https://bastianoleah.netlify.app/blog/waldo/">Encuentra diferencias entre objetos de R con {waldo} &rarr;</a>
  
</div>

      </footer>
    </article>
    
      <div class="post-comments pa0 pa4-l mt4">
  
    
      <script src="https://utteranc.es/client.js"
              repo="bastianolea/blog-bastianolea-r"
              issue-term="pathname"
              theme="github-light"
              label="comments"
              crossorigin="anonymous"
              async
              type="text/javascript">
      </script>
    
  
</div>

    
  </section>
</main>

        
          <script id="partials/analytics.html" 
  data-goatcounter="https://bastimapache.goatcounter.com/count"
  async src="//gc.zgo.at/count.js"></script>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2025 Basti√°n Olea Herrera, Chile
      <span class="middot-divider"></span>
      Hecho con <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Ap√©ro</a></span>.
      <br />
      
Basado en <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span>, de <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bastianoleah.shinyapps.io/buscador/" title="search" target="_blank" rel="me noopener">
      <i class="fas fa-search fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/bastianolea" title="github" target="_blank" rel="me noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://x.com/bastimapache" title="twitter" target="_blank" rel="me noopener">
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/bastianolea/" title="linkedin" target="_blank" rel="me noopener">
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.tiktok.com/@bastimapache" title="tiktok" target="_blank" rel="me noopener">
      <i class="fab fa-tiktok fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.instagram.com/raccunnie" title="instagram" target="_blank" rel="me noopener">
      <i class="fab fa-instagram fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.goodreads.com/user/show/53224910-basti-n-olea-herrera" title="goodreads" target="_blank" rel="me noopener">
      <i class="fab fa-goodreads fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.last.fm/user/bastimapache" title="lastfm" target="_blank" rel="me noopener">
      <i class="fab fa-lastfm fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bsky.app/profile/bastianolea.rbind.io" title="bluesky" target="_blank" rel="me noopener">
      <i class="fab fa-bluesky fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/contacto/" title="envelope" >
      <i class="fas fa-envelope fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/about/" title="Basti√°n Olea: Sobre mi">Sobre mi</a>
      
      <a class="dib pv1 ph2 link" href="https://bastianoleah.shinyapps.io/buscador/" title="Buscador">Buscar</a>
      
      <a class="dib pv1 ph2 link" href="/contacto/" title="Basti√°n Olea: Contacto">Contacto</a>
      
      <a class="dib pv1 ph2 link" href="/license/" title="Basti√°n Olea: Licencia">Licencia</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>

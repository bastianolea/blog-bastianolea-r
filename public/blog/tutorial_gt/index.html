<!DOCTYPE html>
<html lang="es-ES" dir="ltr"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=4512&amp;path=livereload" data-no-instant defer></script>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.152.2">
<title>Tutorial: generar tablas atractivas y personalizables con {gt} | Basti√°n Olea</title>


<meta property="twitter:site" content="@bastimapache">
<meta property="twitter:creator" content="@bastimapache">







  
    
  
<meta name="description" content="El paquete de R `{gt}` genera tablas para presentar tus datos. Produce tablas atractivas con muy pocas l√≠neas de c√≥digo, y al mismo tiempo ofrece una alta capacidad de personalizaci√≥n de las tablas. En este art√≠culo te mostrar√© tres ejemplos de creaci√≥n de distintas tablas basadas en datos reales.">


<meta property="og:site_name" content="Basti√°n Olea">
<meta property="og:title" content="Tutorial: generar tablas atractivas y personalizables con {gt} | Basti√°n Olea">
<meta property="og:description" content="El paquete de R `{gt}` genera tablas para presentar tus datos. Produce tablas atractivas con muy pocas l√≠neas de c√≥digo, y al mismo tiempo ofrece una alta capacidad de personalizaci√≥n de las tablas. En este art√≠culo te mostrar√© tres ejemplos de creaci√≥n de distintas tablas basadas en datos reales." />
<meta property="og:type" content="page" />
<meta property="og:url" content="http://localhost:4512/blog/tutorial_gt/" />
<meta property="og:locale" content="es-ES">




    
        <meta property="og:image" content="http://localhost:4512/blog/tutorial_gt/featured.png" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="http://localhost:4512/blog/tutorial_gt/featured.png" >
    
    
  
  <meta itemprop="name" content="Tutorial: generar tablas atractivas y personalizables con {gt}">
  <meta itemprop="description" content="El paquete de R {gt} (llamado as√≠ por generar great tables) permite producir tablas atractivas con R para presentar tus datos. Sus cualidades principales son que produce resultados atractivos con muy pocas l√≠neas de c√≥digo, pero al mismo tiempo ofrece una alta capacidad de personalizaci√≥n, teniendo opciones para personalizar pr√°cticamente todos los aspectos de la tabla.
Otro beneficio de usar este paquete es que contiene funciones que hacen muy f√°cil darle el formato correcto a las variables num√©ricas, como porcentajes, n√∫meros grandes, cifras en dinero, etc., Y adem√°s, ofrece funciones para darle estilos personalizados a las columnas o celdas de tu tabla de forma program√°tica. Esto permite generar ciertas reglas para que las celdas cambien de colores dependiendo de su valor, ciertas cifras cambian su tipo de letra bajo determinadas circunstancias, y mucho m√°s.">
  <meta itemprop="datePublished" content="2024-11-19T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-11-19T00:00:00+00:00">
  <meta itemprop="wordCount" content="5608">
  <meta itemprop="image" content="http://localhost:4512/blog/tutorial_gt/featured.png">
  <meta itemprop="keywords" content="Tablas,Web scraping,Chile">
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="false" type="image/x-icon">
  <link rel="icon" href="false" type="image/x-icon">
  
  
  <link rel="stylesheet" href="../../style.main.min.7887be321ed5334c878ceffe54c6681c0cc23ed59f4c21d854aa4b609d217cc7.css" integrity="sha256-eIe&#43;Mh7VM0yHjO/&#43;VMZoHAzCPtWfTCHYVKpLYJ0hfMc=" media="screen">
  
  
  <script src="../../panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script>
  
  
  <script src="../../main.min.858230d8d39b17ec435a8cd8991902766cb7afe0621875ffe5fcdf376474ca6e.js" type="text/javascript"></script>
  
  <link rel="stylesheet" href="../../css/syntax.css">
</head>
<body>
      <div class="grid-container single-sidebar">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="http://localhost:4512/" title="Home">
      <img src="../../img/logo.png" class="dib db-l h2 w-auto" alt="Basti√°n Olea">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="../../blog/" title="Basti√°n Olea: Blog de R">Blog</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://bastianoleah.shinyapps.io/buscador/" title="Buscador">Buscar</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://bastianolea.github.io/aprende_r/" title="Aprende R">Aprende R</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="../../categories/tutoriales/" title="Tutoriales">Tutoriales</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://bastianolea.github.io/shiny_apps/" title="Apps">Apps</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="https://bastianolea.github.io/datos_sociales/" title="Datos">Datos</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="../../blog/r_introduccion/recursos_r/" title="Recursos">Enlaces</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="../../about/" title="Basti√°n Olea: Sobre mi">Yo</a>
      
      
      
      <div class="dib v-mid", style = "padding: 4px; margin-top: 4px;">
        <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bastianoleah.shinyapps.io/buscador/" title="search" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fas fa-search fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/bastianolea" title="github" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://x.com/bastimapache" title="twitter" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/bastianolea/" title="linkedin" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.tiktok.com/@bastimapache" title="tiktok" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-tiktok fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.instagram.com/raccunnie" title="instagram" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-instagram fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.goodreads.com/user/show/53224910-basti-n-olea-herrera" title="goodreads" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-goodreads fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.last.fm/user/bastimapache" title="lastfm" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-lastfm fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bsky.app/profile/bastianolea.rbind.io" title="bluesky" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-bluesky fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="../../contacto/" title="envelope" 
    style="margin-bottom: 6px !important;"> 
      <i class="fas fa-envelope fa-lg fa-fw"></i>
    </a>
  
</div>

      </div>
      
    </div>
  </nav>
</header>


                       
 

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 pr3-l">
      <header class="post-header" style="margin-top:-30px;">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">Tutorial: generar tablas atractivas y personalizables con {gt}</h1>
        
        
        <p class="f7 db mv0 ttu">19/11/2024</p>
        
        
        
        <dl class="f6 lh-copy">
          <em><dd class="fw5 ml0"> <a href="http://localhost:4512/tags/tablas"
          style="margin-right: 2px; 
                       color: #EAD2FA; 
                       font-style: normal;
                       text-decoration: none;
                       font-size: 10pt;
                       background-color: #9069C0; 
                       border-radius: 3px; 
                       padding: 2px 6px; ">
            tablas</a>  <a href="http://localhost:4512/tags/web-scraping"
          style="margin-right: 2px; 
                       color: #EAD2FA; 
                       font-style: normal;
                       text-decoration: none;
                       font-size: 10pt;
                       background-color: #9069C0; 
                       border-radius: 3px; 
                       padding: 2px 6px; ">
            web scraping</a>  <a href="http://localhost:4512/tags/chile"
          style="margin-right: 2px; 
                       color: #EAD2FA; 
                       font-style: normal;
                       text-decoration: none;
                       font-size: 10pt;
                       background-color: #9069C0; 
                       border-radius: 3px; 
                       padding: 2px 6px; ">
            Chile</a> </dd></em>
        </dl>
         
      
        
      
      
    </header>
      
      
    <section class="post-body pt5 pb4">
        <p>
<a href="https://gt.rstudio.com" target="_blank" rel="noopener">El paquete de R <code>{gt}</code></a> (llamado as√≠ por generar <em>great tables</em>) permite producir tablas atractivas con R para presentar tus datos. Sus cualidades principales son que produce <strong>resultados atractivos con muy pocas l√≠neas de c√≥digo</strong>, pero al mismo tiempo ofrece una <strong>alta capacidad de personalizaci√≥n</strong>, teniendo opciones para personalizar pr√°cticamente todos los aspectos de la tabla.</p>
<p>Otro beneficio de usar este paquete es que contiene funciones que hacen muy f√°cil darle el <strong>formato correcto a las variables num√©ricas,</strong> como porcentajes, n√∫meros grandes, cifras en dinero, etc., Y adem√°s, ofrece funciones para darle estilos personalizados a las columnas o celdas de tu tabla de forma program√°tica. Esto permite generar ciertas reglas para que las <strong>celdas cambien de colores dependiendo de su valor</strong>, ciertas cifras <strong>cambian su tipo de letra bajo determinadas circunstancias</strong>, y mucho m√°s.</p>
<p>En este art√≠culo te mostrar√© tres ejemplos de creaci√≥n de distintas tablas basadas en datos reales:</p>
<ol>
<li>Tabla de <strong>estimaci√≥n de pobreza comunal</strong>, con estilo condicional de celdas y columnas con colorizaci√≥n en base a datos</li>
<li>Tabla de <strong>resultados electorales</strong>, con colorizaci√≥n de celdas de variables categ√≥ricas en base a una segunda variable categ√≥rica</li>
<li>Tabla de <strong>Producto Interno Bruto regional</strong>, con colorizaci√≥n de m√∫ltiples columnas num√©ricas de forma simult√°nea, y estilo de celdas condicional</li>
</ol>
<hr>




<h2 id="tabla-de-estimaci√≥n-de-pobreza-por-comunas">Tabla de estimaci√≥n de pobreza por comunas
  <a href="#tabla-de-estimaci%c3%b3n-de-pobreza-por-comunas"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>El primer ejemplo de tabla se basar√° en los datos de 
<a href="https://bidat.midesof.cl/directorio/Pobreza%20comunal/estimaciones-de-pobreza-comunal-2022" target="_blank" rel="noopener">estimaciones de pobreza comunal del a√±o 2022, producidos por el Ministerio de Desarrollo Social</a> de Chile.</p>
<p>El primer paso ser√° 
<a href="https://bidat.midesof.cl/directorio/Pobreza%20comunal/estimaciones-de-pobreza-comunal-2022" target="_blank" rel="noopener">obtener los datos oficiales.</a> Por conveniencia, tengo la tabla con los datos originales pre-procesada 
<a href="https://github.com/bastianolea/pobreza_chile" target="_blank" rel="noopener">en un repositorio sobre datos de pobreza en Chile</a>, por lo que es posible importar los datos limpios en una sola l√≠nea de c√≥digo:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">pobreza</span> <span class="o">&lt;-</span> <span class="n">readr</span><span class="o">::</span><span class="nf">read_csv2</span><span class="p">(</span><span class="s">&#34;https://raw.githubusercontent.com/bastianolea/pobreza_chile/refs/heads/main/pobreza_comunal/datos_procesados/pobreza_comunal.csv&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pobreza</span>
</span></span></code></pre></div><pre><code># A tibble: 345 √ó 8
   codigo region     nombre_comuna poblacion pobreza_n pobreza_p limite_inferior
    &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;
 1   1101 Tarapac√°   Iquique          229674    41967.     0.183          0.162 
 2   1107 Tarapac√°   Alto Hospicio    138527    45162.     0.326          0.295 
 3   1401 Tarapac√°   Pozo Almonte      18290     4563.     0.250          0.199 
 4   1402 Tarapac√°   Cami√±a             1380      308.     0.223          0.138 
 5   1403 Tarapac√°   Colchane           1575      473.     0.300          0.187 
 6   1404 Tarapac√°   Huara              3072     1185.     0.386          0.319 
 7   1405 Tarapac√°   Pica               6184     1040.     0.168          0.119 
 8   2101 Antofagas‚Ä¶ Antofagasta      438942    73103.     0.167          0.141 
 9   2102 Antofagas‚Ä¶ Mejillones        15502     3078.     0.199          0.127 
10   2103 Antofagas‚Ä¶ Sierra Gorda       1790      295.     0.165          0.0743
# ‚Ñπ 335 more rows
# ‚Ñπ 1 more variable: limite_superior &lt;dbl&gt;
</code></pre>
<p>Podemos ver que los datos corresponden a 345 filas con informaci√≥n de las comunas, su poblaci√≥n, y las cifras de pobreza en n√∫meros absolutos y porcentaje.</p>
<p>Para el ejemplo, primero obtendremos 7 filas al azar y seleccionaremos solamente las columnas que nos interesan. Teniendo cualquier tabla de datos en R, si le agregamos la funci√≥n <code>gt()</code> crearemos una tabla <code>{gt}</code> con las configuraciones por defecto:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">gt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">set.seed</span><span class="p">(</span><span class="m">1917</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">tabla_pobreza_1</span> <span class="o">&lt;-</span> <span class="n">pobreza</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">slice_sample</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">7</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">select</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="nf">contains</span><span class="p">(</span><span class="s">&#34;comuna&#34;</span><span class="p">),</span> <span class="n">poblacion</span><span class="p">,</span> <span class="nf">starts_with</span><span class="p">(</span><span class="s">&#34;pobreza&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">gt</span><span class="p">()</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pobreza_1.png"/>
</div>
<p>Esta es la tabla b√°sica que entrega <code>{gt}</code>, la cual viene con l√≠neas horizontales elegantes y un espaciado de celdas agradable. Tiene una apariencia bastante mejor que haber pegado a los datos en una planilla de Excel ü§´</p>




<h3 id="formato-de-variables-num√©ricas">Formato de variables num√©ricas
  <a href="#formato-de-variables-num%c3%a9ricas"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>El primer paso para mejorar esta tabla es darle un formato de texto correcto a las variables num√©ricas. Esto logramos con las funciones de <code>{gt}</code> que empiezan con <code>fmt_</code> (por <em>formato</em>), de las cuales usaremos <code>fmt_number()</code> para remover decimales de los n√∫meros enteros y aplicar separadores de miles, y <code>fmt_percent()</code> para especificar el n√∫mero de decimales y usar la coma como separador de decimales.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pobreza_2</span> <span class="o">&lt;-</span> <span class="n">tabla_pobreza_1</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># dar formato a n√∫meros enteros</span>
</span></span><span class="line"><span class="cl">  <span class="nf">fmt_number</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">poblacion</span><span class="p">,</span> <span class="n">pobreza_n</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">             <span class="n">decimals</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">sep_mark</span> <span class="o">=</span> <span class="s">&#34;.&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># dar formato a porcentajes</span>
</span></span><span class="line"><span class="cl">  <span class="nf">fmt_percent</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">pobreza_p</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">decimals</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">drop_trailing_zeros</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">dec_mark</span> <span class="o">=</span> <span class="s">&#34;,&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pobreza_2.png"/>
</div>




<h3 id="apariencia-de-columnas">Apariencia de columnas
  <a href="#apariencia-de-columnas"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>El segundo paso va a ser cambiar el formato del texto de algunas columnas. En este caso, queremos aplicar letras negrita a la columna <code>nombre_comuna</code>, Y vamos a alinear la columna <code>region</code> hacia la derecha, para que se pegue al nombre de las comunas. Esto se lleva a cabo con la funci√≥n <code>tab_style()</code>, cuyo primer argumento es el estilo que vamos a darle a las celdas, y el segundo es las columnas o filas que vamos a afectar. C√≥mo vamos a cambiar el texto de las celdas, en el argumento <code>style</code> se usa la funci√≥n <code>cell_text()</code>, que contiene todos los atributos que podemos cambiar de las letras de las celdas, como color, tama√±o, estilo, peso, etc.</p>
<p>La alineaci√≥n del texto tambi√©n podr√≠amos haberla hecho con la funci√≥n <code>tab_style()</code>, especificando en <code>cell_text()</code> que queremos que el texto sea alienado a la derecha, pero <code>{gt}</code> nos facilita un poco √©sto con la funci√≥n <code>cols_align()</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pobreza_3</span> <span class="o">&lt;-</span> <span class="n">tabla_pobreza_2</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># cambiar estilo de texto de una columna</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">weight</span> <span class="o">=</span> <span class="s">&#34;bold&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">nombre_comuna</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># alineaci√≥n de texto de una columna</span>
</span></span><span class="line"><span class="cl">  <span class="nf">cols_align</span><span class="p">(</span><span class="n">align</span> <span class="o">=</span> <span class="s">&#34;right&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="n">columns</span> <span class="o">=</span> <span class="n">region</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pobreza_3.png"/>
</div>
<p>Para terminar de cambiar las configuraciones b√°sicas de nuestra tabla, tenemos que mejorar los nombres de las columnas y agregar informaci√≥n de contexto a la tabla. Reemplazaremos los nombres de las columnas por nombres correctamente redactados, usando la funci√≥n <code>cols_label()</code>, a la cual hay que darle los nombres de las columnas con el texto que queremos que tenga cada uno. Luego, utilizaremos la funci√≥n <code>tab_header()</code> para agregar t√≠tulo y subt√≠tulo, y la funci√≥n <code>tab_source_note()</code> para agregar un texto de fuente debajo de la tabla.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pobreza_4</span> <span class="o">&lt;-</span> <span class="n">tabla_pobreza_3</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># nombres de columnas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">cols_label</span><span class="p">(</span><span class="n">region</span> <span class="o">=</span> <span class="s">&#34;Regi√≥n&#34;</span><span class="p">,</span> <span class="n">nombre_comuna</span> <span class="o">=</span> <span class="s">&#34;Comuna&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">poblacion</span> <span class="o">=</span> <span class="s">&#34;Poblaci√≥n&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="n">pobreza_n</span> <span class="o">=</span> <span class="s">&#34;Cantidad&#34;</span><span class="p">,</span> <span class="n">pobreza_p</span> <span class="o">=</span> <span class="s">&#34;Porcentaje&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># t√≠tulo y subt√≠tulo</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_header</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">&#34;Pobreza comunal&#34;</span><span class="p">,</span> <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&#34;Cantidad y porcentaje de personas en situaci√≥n de pobreza&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># texto fuente</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_source_note</span><span class="p">(</span><span class="s">&#34;Fuente: Estimaciones de pobreza comunal 2022,&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_source_note</span><span class="p">(</span><span class="s">&#34;Ministerio de Desarrollo Social&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pobreza_4.png"/>
</div>
<p>En este punto ya tenemos una tabla presentable, ordenada y elegante. Podemos guardar la tabla como una imagen con el comando <code>gtsave()</code>, incluirla en un reporte Quarto/RMarkdown o en una app Shiny.</p>




<h3 id="estilo-condicional-de-celdas">Estilo condicional de celdas
  <a href="#estilo-condicional-de-celdas"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Podemos seguir mejorando en la tabla agregando cambios condicionales en el estilo de celdas que cumplan con una condici√≥n puntual. Por ejemplo, queremos destacar celdas de la variable <code>poobreza_n</code> que superen cierto valor, debido a que nos parece relevante distinguir comunas donde exista una cierta cantidad de personas en condici√≥n de pobreza.</p>
<p>Para agregar estilos condicionales a las celdas de una o varias columnas, usamos la misma funci√≥n <code>tab_style()</code> que usamos para darle un estilo a las columnas completas, pero esta vez, en el argumento de <code>location</code> que usamos para especificar la columna que queremos modificar, especificamos tanto una columna como un criterio para las filas. De esta forma, se indica que queremos cambiar el estilo de una columna, pero s√≥lo si sus filas cumplen una condici√≥n determinada:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pobreza_5</span> <span class="o">&lt;-</span> <span class="n">tabla_pobreza_4</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_fill</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#34;red&#34;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="m">0.2</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">pobreza_n</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                                   <span class="n">rows</span> <span class="o">=</span> <span class="n">pobreza_n</span> <span class="o">&gt;</span> <span class="m">6000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pobreza_5.png"/>
</div>




<h3 id="colorear-columnas-seg√∫n-su-valor">Colorear columnas seg√∫n su valor
  <a href="#colorear-columnas-seg%c3%ban-su-valor"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Podemos hacer que una columna de una variable num√©rica exprese su valor a trav√©s de una <strong>escala de colores</strong>. As√≠ resulta mucho m√°s f√°cil guiar la atenci√≥n a las diferencias en los valores de las observaciones, ya que podemos identificar valores bajos y altos de la misma variable siguiendo el degradado de colores.</p>
<p>La funci√≥n <code>data_color()</code> aplica colorizaci√≥n de celdas en base a los valores de la variable indicada en el argumento <code>column</code>. Si las variables num√©rica, especificamos que el m√©todo sea <code>numeric</code>, y luego tenemos varios argumentos que podemos especificar para modificar la colorizaci√≥n. Los principales son <code>domain</code>, donde se especifica el rango de la escala de colores (es decir, el valor que corresponde con el color m√≠nimo y el valor del color m√°ximo), y la paleta en <code>palette</code>, qu√© puede hacer un vector de colores que van desde el valor m√°s bajo el valor m√°s alto; es decir, el color asignado a los valores m√°s bajos de la variable, y los colores siguientes en el degradado. En este caso, queremos que las cifras bajas sean de color blanco (igual que el fondo del gr√°fico), y a medida que el valor sea m√°s alto sean de un rojo intenso y luego un rojo oscuro. El color m√°s alto (rojo oscuro) corresponde al valor <code>0.3</code> o 30%, dado que en el contexto de medici√≥n de pobreza consideramos que eso ya es una cifra suficientemente alarmante. Los valores que queden fuera de este rango de cero a 30% van a adquirir el color de los datos perdidos (<code>na_color</code>), de modo que todos los valores iguales o mayores a 0.3 van a ser del color m√°s alto.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pobreza_6</span> <span class="o">&lt;-</span> <span class="n">tabla_pobreza_5</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">data_color</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">pobreza_p</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">method</span> <span class="o">=</span> <span class="s">&#34;numeric&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="n">domain</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0.3</span><span class="p">),</span> <span class="n">na_color</span> <span class="o">=</span> <span class="s">&#34;red4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">palette</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;white&#34;</span><span class="p">,</span> <span class="s">&#34;red1&#34;</span><span class="p">,</span> <span class="s">&#34;red4&#34;</span><span class="p">))</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pobreza_6.png"/>
</div>
<p>Gracias al degradado de colores a las celdas tenemos una tabla que comunica mucho m√°s que la versi√≥n anterior, dado que gu√≠a la interpretaci√≥n de los datos a una variable puntual.</p>




<h3 id="estilo-avanzado-de-tablas">Estilo avanzado de tablas
  <a href="#estilo-avanzado-de-tablas"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Para finalizar con esta tabla, podemos personalizar con mayor detalle de todos los aspectos de la misma. En el bloque de c√≥digo que viene a continuaci√≥n, vamos a especificar m√∫ltiples modificaciones a la tabla:</p>
<ul>
<li>Cambiar el tama√±o del texto de las celdas</li>
<li>Usar una tipograf√≠a o tipo de letra distinto para la tabla, usando tipograf√≠as de Google, con las funciones <code>opt_table_font()</code> y 
<a href="https://fonts.google.com" target="_blank" rel="noopener"><code>google_font()</code></a></li>
<li>Poner el subt√≠tulo de la tabla en it√°lica con <code>tab_style()</code></li>
<li>Cambiar el color del texto de algunas columnas, ya que queremos que pasen a segundo plano, usando <code>tab_style()</code></li>
<li>Alinear los textos de t√≠tulo y subt√≠tulo hacia el lado izquierdo, usando <code>tab_style()</code></li>
<li>Cambiar el color de fondo de los nombres de columnas, para crear una jerarqu√≠a en la tabla, usando <code>tab_style()</code></li>
<li>Eliminar las l√≠neas de borde de la tabla con <code>opt_table_lines(&quot;none&quot;)</code>, para luego personalizar las l√≠neas horizontales en <code>tab_options()</code>, poni√©ndolas de color blanco y ensanch√°ndolas para que creen una separaci√≥n entre filas</li>
<li>Crear un espaciado entre el subt√≠tulo con el resto de la tabla, al ensanchar la l√≠nea divisoria entre ambas, usando <code>tab_options()</code></li>
<li>Agregar un color de fondo alternante de las filas, para guiar la lectura, usando <code>opt_row_striping()</code></li>
<li>Cambiar el texto de la fuente en la parte de abajo de la tabla, y creamos un espaciado entre la fuente y la tabla ensanchando la l√≠nea divisoria entre ambas, usando <code>tab_style()</code> y <code>tab_options()</code></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pobreza_7</span> <span class="o">&lt;-</span> <span class="n">tabla_pobreza_6</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># texto de tabla m√°s chico</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="s">&#34;small&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">cells_body</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                             <span class="nf">cells_column_labels</span><span class="p">()))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># tipograf√≠a</span>
</span></span><span class="line"><span class="cl">  <span class="nf">opt_table_font</span><span class="p">(</span><span class="n">font</span> <span class="o">=</span> <span class="nf">google_font</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#34;Host Grotesk&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># subt√≠tulo en it√°licas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="s">&#34;italic&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_title</span><span class="p">(</span><span class="s">&#34;subtitle&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># texto de columna</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="s">&#34;grey60&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">poblacion</span><span class="p">)))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># alineaci√≥n de texto de titulares</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">align</span> <span class="o">=</span> <span class="s">&#34;left&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_title</span><span class="p">())</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># color de fondo de t√≠tulos de columnas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_fill</span><span class="p">(</span><span class="s">&#34;grey92&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_column_labels</span><span class="p">())</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># eliminar l√≠neas por defecto</span>
</span></span><span class="line"><span class="cl">  <span class="nf">opt_table_lines</span><span class="p">(</span><span class="s">&#34;none&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># espaciado entre filas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">table_body.hlines.style</span> <span class="o">=</span> <span class="s">&#34;solid&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">table_body.hlines.width</span> <span class="o">=</span> <span class="m">2</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">table_body.hlines.color</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># espaciado entre subt√≠tulo y tabla</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">heading.border.bottom.style</span> <span class="o">=</span> <span class="s">&#34;solid&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">heading.border.bottom.color</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">heading.border.bottom.width</span> <span class="o">=</span> <span class="m">12</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">heading.padding</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># filas con fondo alternante</span>
</span></span><span class="line"><span class="cl">  <span class="nf">opt_row_striping</span><span class="p">()</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># texto fuente</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">source_notes.font.size</span> <span class="o">=</span> <span class="s">&#34;small&#34;</span><span class="p">,</span> <span class="n">source_notes.padding</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">align</span> <span class="o">=</span> <span class="s">&#34;right&#34;</span><span class="p">),</span> <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_source_notes</span><span class="p">())</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># espaciado tabla y fuente</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">table_body.border.bottom.style</span> <span class="o">=</span> <span class="s">&#34;solid&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">table_body.border.bottom.color</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">table_body.border.bottom.width</span> <span class="o">=</span> <span class="m">12</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pobreza_7.png"/>
</div>
<p>La tabla terminada tiene una apariencia mucho m√°s personalizada y atractiva ü•∞</p>
<hr>




<h2 id="tabla-de-resultados-electorales">Tabla de resultados electorales
  <a href="#tabla-de-resultados-electorales"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>En el segundo ejemplo, haremos una peque√±a tabla que resuma resultados electorales. En esta tabla, el sector pol√≠tico al que pertenezcan los candidatos o candidatas tendr√° un color espec√≠fico, pero este color se aplicar√° a una columna distinta al sector pol√≠tico.</p>
<p>Los datos fueron obtenidos desde el sitio web del Servel por medio de web scraping. 
<a href="https://github.com/bastianolea/servel_scraping_votaciones" target="_blank" rel="noopener">El procesamiento de los datos y los datos originales se encuentran en este repositorio</a>, pero para este ejemplo, cargaremos directamente el archivo que contiene todos los resultados oficiales, procesados y limpios.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">forcats</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">glue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cargar datos remotamente desde el repositorio</span>
</span></span><span class="line"><span class="cl"><span class="n">datos_elecciones</span> <span class="o">&lt;-</span> <span class="n">readr</span><span class="o">::</span><span class="nf">read_csv2</span><span class="p">(</span><span class="s">&#34;https://raw.githubusercontent.com/bastianolea/servel_scraping_votaciones/refs/heads/main/datos/resultados_alcaldes_2024.csv&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">datos_elecciones</span>
</span></span></code></pre></div><pre><code># A tibble: 1,922 √ó 11
   comuna    candidato         partido lista sector votos porcentaje total_votos
   &lt;chr&gt;     &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
 1 ALGARROBO Marco Antonio Go‚Ä¶ RN      Z - ‚Ä¶ Derec‚Ä¶  4250     0.276        15405
 2 ALGARROBO Veronica Maricel‚Ä¶ IND     CAND‚Ä¶ Indep‚Ä¶  2905     0.189        15405
 3 ALGARROBO Marcela Maritza ‚Ä¶ IND     CAND‚Ä¶ Indep‚Ä¶  2677     0.174        15405
 4 ALGARROBO Alejandro Felipe‚Ä¶ IND     CAND‚Ä¶ Indep‚Ä¶  2425     0.157        15405
 5 ALGARROBO Carlos Orlando T‚Ä¶ IND     CAND‚Ä¶ Indep‚Ä¶  1089     0.0707       15405
 6 ALGARROBO Maria Luisa Hami‚Ä¶ IND     CAND‚Ä¶ Indep‚Ä¶   365     0.0237       15405
 7 ALGARROBO Gaston Dubournai‚Ä¶ IND     F - ‚Ä¶ Indep‚Ä¶   332     0.0216       15405
 8 ALGARROBO Nulo/Blanco       &lt;NA&gt;    &lt;NA&gt;  Otros   1362     0.0884       15405
 9 ALHUE     Marcela Chamorro‚Ä¶ IND     H - ‚Ä¶ Izqui‚Ä¶  3490     0.598         5841
10 ALHUE     Jose Andres Arel‚Ä¶ IND     CAND‚Ä¶ Indep‚Ä¶  1828     0.313         5841
# ‚Ñπ 1,912 more rows
# ‚Ñπ 3 more variables: mesas_escrutadas &lt;dbl&gt;, mesas_totales &lt;dbl&gt;,
#   mesas_porcentaje &lt;dbl&gt;
</code></pre>
<p>Habiendo cargado los datos, filtramos por una comuna que nos interese, y ordenamos las columnas:</p>
<ul>
<li>Convertimos el sector pol√≠tico (variable <code>sector</code>) en un factor ordenado.</li>
<li>Luego hacemos que la columna <code>candidato</code> tambi√©n sea un factor cuyo orden depende del <code>porcentaje</code> obtenido.</li>
<li>Llevamos los votos nulos a la √∫ltima posici√≥n del factor de candidatos para que aparezcan al final.</li>
<li>Ordenamos la tabla por el factor ordenado <code>candidato</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">comuna_elegida</span> <span class="o">=</span> <span class="s">&#34;PE√ëALOLEN&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">tabla_elecciones_1</span> <span class="o">&lt;-</span> <span class="n">datos_elecciones</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">filter</span><span class="p">(</span><span class="n">comuna</span> <span class="o">==</span> <span class="n">comuna_elegida</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># ordenar sector pol√≠tico</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">sector</span> <span class="o">=</span> <span class="nf">as.factor</span><span class="p">(</span><span class="n">sector</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">         <span class="n">sector</span> <span class="o">=</span> <span class="nf">fct_relevel</span><span class="p">(</span><span class="n">sector</span><span class="p">,</span> <span class="s">&#34;Izquierda&#34;</span><span class="p">,</span> <span class="s">&#34;Derecha&#34;</span><span class="p">,</span> <span class="s">&#34;Independiente&#34;</span><span class="p">,</span> <span class="s">&#34;Otros&#34;</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># nulos al final de la tabla</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">candidato</span> <span class="o">=</span> <span class="nf">fct_reorder</span><span class="p">(</span><span class="n">candidato</span><span class="p">,</span> <span class="n">porcentaje</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">         <span class="n">candidato</span> <span class="o">=</span> <span class="nf">fct_relevel</span><span class="p">(</span><span class="n">candidato</span><span class="p">,</span> <span class="s">&#34;Nulo/Blanco&#34;</span><span class="p">,</span><span class="n">after</span> <span class="o">=</span> <span class="m">0</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">candidato</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">select</span><span class="p">(</span><span class="n">candidato</span><span class="p">,</span> <span class="n">partido</span><span class="p">,</span> <span class="n">votos</span><span class="p">,</span> <span class="n">porcentaje</span><span class="p">,</span> <span class="n">sector</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">tabla_elecciones_1</span>
</span></span></code></pre></div><pre><code># A tibble: 5 √ó 5
  candidato                  partido votos porcentaje sector       
  &lt;fct&gt;                      &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;        
1 Miguel Andres Concha Manso FA      52293     0.317  Izquierda    
2 Claudia Mora Vega          RN      52170     0.316  Derecha      
3 Carlos Alarcon Castro      IND     31217     0.189  Independiente
4 Eduardo Giesen Amtmann     IND      9321     0.0565 Independiente
5 Nulo/Blanco                &lt;NA&gt;    19928     0.121  Otros        
</code></pre>
<p>Procedemos a crear la tabla b√°sica con <code>{gt}</code>, incluyendo un subt√≠tulo en formato <em>markdown</em> que contiene dentro de s√≠ el nombre de la comuna elegida a partir del objeto que usamos para filtrar los datos en el paso anterior. El 
<a href="https://quarto.org/docs/authoring/markdown-basics.html" target="_blank" rel="noopener">texto <em>markdown</em></a> permite darle estilo enriquecido al texto de forma sencilla usando s√≠mbolos, lo cual resulta conveniente para casos como √©ste.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">gt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">tabla_elecciones_2</span> <span class="o">&lt;-</span> <span class="n">tabla_elecciones_1</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">gt</span><span class="p">()</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># titulares</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_header</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="nf">md</span><span class="p">(</span><span class="s">&#34;_Resultados parciales:_ Elecciones Municipales 2024&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">             <span class="n">subtitle</span> <span class="o">=</span> <span class="nf">md</span><span class="p">(</span><span class="nf">glue</span><span class="p">(</span><span class="s">&#34;**{str_to_title(comuna_elegida)}**&#34;</span><span class="p">)))</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_elecciones_2.png"/>
</div>
<p>Aplicamos el formato de porcentaje a la columna de porcentaje, y el formato num√©rico a la columna num√©rica. Luego definimos algunos aspectos del estilo de la tabla, como fondos de color para algunas columnas, una 
<a href="https://fonts.google.com" target="_blank" rel="noopener">tipograf√≠a personalizada desde Google Fonts</a>, alineaciones de textos, y estilos de textos distintos en los distintos elementos de la tabla.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_elecciones_3</span> <span class="o">&lt;-</span> <span class="n">tabla_elecciones_2</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># formato de n√∫meros</span>
</span></span><span class="line"><span class="cl">  <span class="nf">fmt_percent</span><span class="p">(</span><span class="n">porcentaje</span><span class="p">,</span> <span class="n">decimals</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">fmt_number</span><span class="p">(</span><span class="n">votos</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="n">decimals</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">sep_mark</span> <span class="o">=</span> <span class="s">&#34;.&#34;</span><span class="p">,</span> <span class="n">dec_mark</span> <span class="o">=</span> <span class="s">&#34;,&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># estilo fondos de todas las celdas excepto partido</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">candidato</span><span class="p">,</span> <span class="n">votos</span><span class="p">,</span> <span class="n">porcentaje</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">            <span class="n">style</span> <span class="o">=</span> <span class="nf">cell_fill</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#34;grey96&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># tipograf√≠a</span>
</span></span><span class="line"><span class="cl">  <span class="nf">opt_table_font</span><span class="p">(</span><span class="n">font</span> <span class="o">=</span> <span class="nf">google_font</span><span class="p">(</span><span class="s">&#34;Open Sans&#34;</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># alineaci√≥n de textos</span>
</span></span><span class="line"><span class="cl">  <span class="nf">cols_align</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">candidato</span><span class="p">,</span> <span class="n">partido</span><span class="p">,</span> <span class="n">porcentaje</span><span class="p">),</span> <span class="n">align</span> <span class="o">=</span> <span class="s">&#34;left&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">cols_align</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">partido</span><span class="p">),</span> <span class="n">align</span> <span class="o">=</span> <span class="s">&#34;center&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">cols_hide</span><span class="p">(</span><span class="n">sector</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">opt_table_lines</span><span class="p">(</span><span class="s">&#34;none&#34;</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">opt_align_table_header</span><span class="p">(</span><span class="n">align</span> <span class="o">=</span> <span class="s">&#34;left&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># estilo de textos</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">candidato</span><span class="p">,</span> <span class="n">partido</span><span class="p">,</span> <span class="n">porcentaje</span><span class="p">)),</span> 
</span></span><span class="line"><span class="cl">            <span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">weight</span> <span class="o">=</span> <span class="s">&#34;bold&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_column_labels</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">            <span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="s">&#34;italic&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">rows</span> <span class="o">=</span> <span class="n">candidato</span> <span class="o">==</span> <span class="s">&#34;Nulo/Blanco&#34;</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">            <span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">weight</span> <span class="o">=</span> <span class="s">&#34;normal&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># etiquetas de columnas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">cols_label</span><span class="p">(</span><span class="n">candidato</span> <span class="o">=</span> <span class="s">&#34;Candidato/a&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">partido</span> <span class="o">=</span> <span class="s">&#34;Partido&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">votos</span> <span class="o">=</span> <span class="s">&#34;Votos&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">porcentaje</span> <span class="o">=</span> <span class="s">&#34;%&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_elecciones_3.png"/>
</div>




<h3 id="colorear-celdas-seg√∫n-una-variable-categ√≥rica-o-factor">Colorear celdas seg√∫n una variable categ√≥rica o factor
  <a href="#colorear-celdas-seg%c3%ban-una-variable-categ%c3%b3rica-o-factor"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Ahora viene lo entretenido. La tabla tiene una columna con una variable de partido pol√≠tico (<code>partido</code>), pero los datos contienen tambi√©n una columna de <code>sector</code> pol√≠tico, que engloba a los partidos pol√≠ticos. Vamos a asignar un color a las celdas del partido pol√≠tico dependiendo del sector pol√≠tico al que pertenecen; es decir, usar el contenido de una columna de la tabla para cambiar el estilo de <em>otra columna distinta</em> de la tabla.</p>
<p>Creamos una lista con los colores que queremos usar para la variable categ√≥rica <code>sector</code>, que representa el sector del espectro pol√≠tico al cual pueden pertenecer los partidos pol√≠ticos.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">color</span> <span class="o">&lt;-</span> <span class="nf">list</span><span class="p">(</span><span class="s">&#34;izquierda&#34;</span> <span class="o">=</span> <span class="s">&#34;#DB231D&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="s">&#34;derecha&#34;</span> <span class="o">=</span> <span class="s">&#34;#1D76DB&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="s">&#34;centro&#34;</span> <span class="o">=</span> <span class="s">&#34;#B16AD2&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="s">&#34;independiente&#34;</span> <span class="o">=</span> <span class="s">&#34;#38B51D&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="s">&#34;otros&#34;</span> <span class="o">=</span> <span class="s">&#34;grey50&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">levels</span><span class="p">(</span><span class="n">tabla_elecciones_1</span><span class="o">$</span><span class="n">sector</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>[1] &quot;Izquierda&quot;     &quot;Derecha&quot;       &quot;Independiente&quot; &quot;Otros&quot;        
</code></pre>
<p>La funci√≥n <code>data_color()</code>, que usamos anteriormente para dar color a variables num√©ricas en base a sus valores, tambi√©n permite asignar colores a las variables en base a sus niveles, para el caso de variables categ√≥ricas o factores que contienen niveles o categor√≠as de respuesta nominales u ordinales.</p>
<p>Para que esto funcione correctamente, es necesario que la variable est√© en formato factor, lo cual hicimos en el primer paso de ordenar las columnas. La variable <code>sector</code> posee un determinado orden de sus niveles, que revisamos con la funci√≥n <code>levels(tabla_elecciones_1$sector)</code>, Y en base al orden de estos niveles, especificamos los colores en la paleta, en el argumento <code>palette</code> de <code>data_color()</code>. Es en esta funci√≥n donde especificamos que la informaci√≥n sale de la columna <code>sector</code>, pero afecta a la columna <code>partido</code>, y el efecto del color se aplica al texto, no al fondo (<code>apply_to = &quot;text&quot;</code>).</p>
<p>Una vez especificando esto, podemos repetir la misma operaci√≥n pero aplicando el efecto al fondo (<code>apply_to = &quot;fill&quot;</code>) y d√°ndole una transparencia de 20% (<code>alpha = 0.2</code>).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_elecciones_4</span> <span class="o">&lt;-</span> <span class="n">tabla_elecciones_3</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># color texto partidos</span>
</span></span><span class="line"><span class="cl">  <span class="nf">data_color</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">sector</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">target_columns</span> <span class="o">=</span> <span class="n">partido</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">method</span> <span class="o">=</span> <span class="s">&#34;factor&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">palette</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">color</span><span class="o">$</span><span class="n">izquierda</span><span class="p">,</span> <span class="n">color</span><span class="o">$</span><span class="n">derecha</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                         <span class="n">color</span><span class="o">$</span><span class="n">independiente</span><span class="p">,</span> <span class="n">color</span><span class="o">$</span><span class="n">otros</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">             <span class="n">apply_to</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># color fondo partidos</span>
</span></span><span class="line"><span class="cl">  <span class="nf">data_color</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">sector</span><span class="p">,</span>  <span class="n">rows</span> <span class="o">=</span> <span class="n">candidato</span> <span class="o">!=</span> <span class="s">&#34;Nulo/Blanco&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">target_columns</span> <span class="o">=</span> <span class="n">partido</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">method</span> <span class="o">=</span> <span class="s">&#34;factor&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">palette</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">color</span><span class="o">$</span><span class="n">izquierda</span><span class="p">,</span> <span class="n">color</span><span class="o">$</span><span class="n">derecha</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                         <span class="n">color</span><span class="o">$</span><span class="n">independiente</span><span class="p">,</span> <span class="n">color</span><span class="o">$</span><span class="n">otros</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">             <span class="n">alpha</span> <span class="o">=</span> <span class="m">0.2</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="n">apply_to</span> <span class="o">=</span> <span class="s">&#34;fill&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="n">autocolor_text</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_elecciones_4.png"/>
</div>
<p>Repetir el efecto de colonizaci√≥n al texto y al fondo por separado nos permite darle un efecto m√°s sofisticado al color de las celdas, donde el fondo de la celda tiene el mismo color que el texto, pero m√°s suave.</p>
<p>Finalmente, aplicamos otras personalizaciones a la tabla, principalmente para crear un espacio entre las celdas y otros elementos de la tabla, y especificar el color de fondo y de texto de los votos nulos/blancos, que son menos relevantes.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_elecciones_5</span> <span class="o">&lt;-</span> <span class="n">tabla_elecciones_4</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># color fondo nulos</span>
</span></span><span class="line"><span class="cl">  <span class="nf">data_color</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">sector</span><span class="p">,</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">candidato</span> <span class="o">==</span> <span class="s">&#34;Nulo/Blanco&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">target_columns</span> <span class="o">=</span> <span class="n">partido</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">palette</span> <span class="o">=</span> <span class="s">&#34;grey96&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">alpha</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">apply_to</span> <span class="o">=</span> <span class="s">&#34;fill&#34;</span><span class="p">,</span> <span class="n">autocolor_text</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># estilo fila nulos</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">rows</span> <span class="o">=</span> <span class="n">candidato</span> <span class="o">==</span> <span class="s">&#34;Nulo/Blanco&#34;</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">            <span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#34;grey70&#34;</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># notas al pie</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">table_body.hlines.style</span> <span class="o">=</span> <span class="s">&#34;solid&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">table_body.hlines.width</span> <span class="o">=</span> <span class="m">8</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">table_body.hlines.color</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">table_body.vlines.style</span> <span class="o">=</span> <span class="s">&#34;solid&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">table_body.vlines.width</span> <span class="o">=</span> <span class="m">8</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">table_body.vlines.color</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_footnote</span><span class="p">(</span><span class="n">footnote</span> <span class="o">=</span> <span class="nf">glue</span><span class="p">(</span><span class="s">&#34;Fuente: Servel&#34;</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_footnotes</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">            <span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">align</span> <span class="o">=</span> <span class="s">&#34;right&#34;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="nf">px</span><span class="p">(</span><span class="m">12</span><span class="p">)))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">heading.subtitle.font.size</span> <span class="o">=</span> <span class="m">19</span><span class="p">,</span> <span class="n">heading.padding</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">heading.border.bottom.style</span> <span class="o">=</span> <span class="s">&#34;solid&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">heading.border.bottom.width</span> <span class="o">=</span> <span class="m">16</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">heading.border.bottom.color</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">table_body.border.bottom.style</span> <span class="o">=</span> <span class="s">&#34;solid&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">table_body.border.bottom.width</span> <span class="o">=</span> <span class="m">5</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">              <span class="n">table_body.border.bottom.color</span> <span class="o">=</span> <span class="s">&#34;white&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">footnotes.padding</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_elecciones_5.png"/>
</div>
<p>Obtenemos como resultado una tabla concisa pero a la vez informativa.</p>
<hr>




<h2 id="tabla-de-producto-interno-bruto-regional">Tabla de Producto Interno Bruto regional
  <a href="#tabla-de-producto-interno-bruto-regional"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>El tercer y √∫ltimo ejemplo ser√° una tabla con datos regionales para un rango de varios a√±os; es decir, una tabla con una alta cantidad de celdas num√©ricas en cuadr√≠cula.</p>
<p>Los datos ser√°n obtenidos directamente desde las 
<a href="https://si3.bcentral.cl/siete/" target="_blank" rel="noopener">estad√≠sticas del Banco Central de Chile</a>, utilizando web scraping, siguiendo el 
<a href="https://github.com/bastianolea/economia_chile" target="_blank" rel="noopener">trabajo previo que hice con estad√≠sticas econ√≥micas</a> para un 
<a href="../../../apps/economia_chile/">visualizador interactivo de indicadores econ√≥micos</a>.</p>
<p>Cargamos el paquete <code>{rvest}</code>, especificamos la direcci√≥n web donde est√° ubicada la tabla que nos interesa, y hacemos web scraping de la tabla ubicada en esa p√°gina:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">rvest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># url con la tabla</span>
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">&lt;-</span> <span class="s">&#34;https://si3.bcentral.cl/Siete/ES/Siete/Cuadro/CAP_ESTADIST_REGIONAL/MN_REGIONAL1/CCNN2018_PIB_REGIONAL_T?cbFechaInicio=2018&amp;cbFechaTermino=2024&amp;cbFrecuencia=ANNUAL&amp;cbCalculo=NONE&amp;cbFechaBase=&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># abrir sesi√≥n y obtener c√≥digo de fuente del sitio</span>
</span></span><span class="line"><span class="cl"><span class="n">sitio</span> <span class="o">&lt;-</span> <span class="nf">session</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="nf">read_html</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># obtener la tabla del sitio, sin convertir unidades</span>
</span></span><span class="line"><span class="cl"><span class="n">tablas</span> <span class="o">&lt;-</span> <span class="n">sitio</span> <span class="o">|&gt;</span> <span class="nf">html_table</span><span class="p">(</span><span class="n">convert</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># limpieza m√≠nima</span>
</span></span><span class="line"><span class="cl"><span class="n">tabla_pib</span> <span class="o">&lt;-</span> <span class="n">tablas[[1]]</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">rename</span><span class="p">(</span><span class="n">region</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">select</span><span class="p">(</span><span class="m">-1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">tabla_pib</span>
</span></span></code></pre></div><pre><code># A tibble: 19 √ó 8
   region                       `2018` `2019` `2020` `2021` `2022` `2023` `2024`
   &lt;chr&gt;                        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; 
 1 Regi√≥n de Arica y Parinacota 1.433  1.419  1.331  1.554  1.665  1.696  1.680 
 2 Regi√≥n de Tarapac√°           4.355  4.573  4.392  4.791  4.868  5.022  5.225 
 3 Regi√≥n de Antofagasta        15.986 15.983 15.697 15.560 15.562 16.089 17.257
 4 Regi√≥n de Atacama            3.687  3.528  3.540  3.958  3.991  4.036  4.081 
 5 Regi√≥n de Coquimbo           5.876  5.956  5.658  6.169  6.126  6.311  6.395 
 6 Regi√≥n de Valpara√≠so         13.989 13.948 13.087 14.406 15.258 15.288 15.551
 7 Regi√≥n Metropolitana de San‚Ä¶ 78.215 78.931 72.170 81.945 84.131 84.396 85.941
 8 Regi√≥n del Libertador Gener‚Ä¶ 7.930  7.882  7.589  8.310  8.328  8.211  8.686 
 9 Regi√≥n del Maule             7.186  7.148  7.049  7.651  7.898  8.046  8.464 
10 Regi√≥n de √ëuble              2.775  2.786  2.693  3.016  3.121  3.066  3.176 
11 Regi√≥n del Biob√≠o            11.337 11.499 10.865 11.864 12.202 12.917 13.241
12 Regi√≥n de La Araucan√≠a       5.241  5.325  5.075  5.708  5.956  6.072  6.255 
13 Regi√≥n de Los R√≠os           2.498  2.503  2.403  2.639  2.709  2.706  2.821 
14 Regi√≥n de Los Lagos          6.422  6.563  6.225  6.722  6.957  7.047  7.156 
15 Regi√≥n de Ays√©n del General‚Ä¶ 1.228  1.243  1.138  1.176  1.198  1.297  1.294 
16 Regi√≥n de Magallanes y de l‚Ä¶ 1.843  1.934  1.689  1.813  1.912  1.943  2.052 
17 Subtotal regionalizado       170.0‚Ä¶ 171.2‚Ä¶ 160.6‚Ä¶ 176.9‚Ä¶ 181.3‚Ä¶ 183.7‚Ä¶ 189.1‚Ä¶
18 Extrarregional               19.435 19.415 18.320 22.270 22.219 20.702 20.737
19 Producto Interno Bruto       189.4‚Ä¶ 190.6‚Ä¶ 178.9‚Ä¶ 199.1‚Ä¶ 203.4‚Ä¶ 204.5‚Ä¶ 209.9‚Ä¶
</code></pre>
<p>Nos encontramos con una tabla que tiene 19 filas y seis columnas num√©ricas, correspondientes a los valores del Producto Interno Bruto para cada uno de los a√±os. Procedemos a limpiar estos datos, debido a que la tabla usa puntos como divisores de miles, y esto hace que R interprete los n√∫meros como si fueran decimales. Usamos <code>stringr::str_remove()</code> para eliminar todos los puntos en todas las columnas que empiecen con <code>20</code> (los a√±os), y luego las convertimos a num√©ricas.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">forcats</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pib_regional</span> <span class="o">&lt;-</span> <span class="n">tabla_pib</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="nf">across</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&#34;20&#34;</span><span class="p">),</span> <span class="o">~</span><span class="nf">str_remove</span><span class="p">(</span><span class="n">.x</span><span class="p">,</span> <span class="s">&#34;\\.&#34;</span><span class="p">)))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="nf">across</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&#34;20&#34;</span><span class="p">),</span> <span class="n">as.numeric</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">filter</span><span class="p">(</span><span class="nf">str_detect</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="s">&#34;Regi√≥n&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pib_regional</span>
</span></span></code></pre></div><pre><code># A tibble: 16 √ó 8
   region                       `2018` `2019` `2020` `2021` `2022` `2023` `2024`
   &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 Regi√≥n de Arica y Parinacota   1433   1419   1331   1554   1665   1696   1680
 2 Regi√≥n de Tarapac√°             4355   4573   4392   4791   4868   5022   5225
 3 Regi√≥n de Antofagasta         15986  15983  15697  15560  15562  16089  17257
 4 Regi√≥n de Atacama              3687   3528   3540   3958   3991   4036   4081
 5 Regi√≥n de Coquimbo             5876   5956   5658   6169   6126   6311   6395
 6 Regi√≥n de Valpara√≠so          13989  13948  13087  14406  15258  15288  15551
 7 Regi√≥n Metropolitana de San‚Ä¶  78215  78931  72170  81945  84131  84396  85941
 8 Regi√≥n del Libertador Gener‚Ä¶   7930   7882   7589   8310   8328   8211   8686
 9 Regi√≥n del Maule               7186   7148   7049   7651   7898   8046   8464
10 Regi√≥n de √ëuble                2775   2786   2693   3016   3121   3066   3176
11 Regi√≥n del Biob√≠o             11337  11499  10865  11864  12202  12917  13241
12 Regi√≥n de La Araucan√≠a         5241   5325   5075   5708   5956   6072   6255
13 Regi√≥n de Los R√≠os             2498   2503   2403   2639   2709   2706   2821
14 Regi√≥n de Los Lagos            6422   6563   6225   6722   6957   7047   7156
15 Regi√≥n de Ays√©n del General‚Ä¶   1228   1243   1138   1176   1198   1297   1294
16 Regi√≥n de Magallanes y de l‚Ä¶   1843   1934   1689   1813   1912   1943   2052
</code></pre>
<p>Ahora podemos crear nuestra tabla b√°sica con <code>{gt}</code>, especificando el formato apropiado para todas las columnas num√©ricas en una sola instancia <code>fmt_number()</code>. Esto es posible porque podemos usar selectores de <code>{dplyr}</code> en los argumentos de columnas de <code>{gt}</code>, as√≠ que podemos pedirle que aplique un formato, estilo, u otras herramientas de <code>{gt}</code> a una o varias columnas seleccionadas por su nombre parcial o por su tipo de datos. En este caso, aplicamos el formato a todas las columnas num√©ricas usando <code>where(is.numeric)</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">gt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">tabla_pib_regional_1</span> <span class="o">&lt;-</span> <span class="n">pib_regional</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">gt</span><span class="p">()</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">cols_align</span><span class="p">(</span><span class="s">&#34;right&#34;</span><span class="p">,</span> <span class="n">region</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># formato de columnas num√©ricas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">fmt_number</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">             <span class="n">sep_mark</span> <span class="o">=</span> <span class="s">&#34;.&#34;</span><span class="p">,</span> <span class="n">decimals</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_1.png"/>
</div>
<p>Con una sola l√≠nea formateamos seis columnas. Yey! ü•≥</p>




<h3 id="c√°lculo-de-diferencia-porcentual-entre-a√±os">C√°lculo de diferencia porcentual entre a√±os
  <a href="#c%c3%a1lculo-de-diferencia-porcentual-entre-a%c3%b1os"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Luego producir esta tabla, vamos a realizar una transformaci√≥n en los datos para poder calcular la variaci√≥n anual, entendida como la diferencia porcentual entre un a√±o y el anterior. Para realizar este c√°lculo, lo m√°s conveniente es transformar los datos a formato largo; es decir, una fila por observaci√≥n, y una variable por columna. Usamos <code>pivot_longer()</code> para transformar las seis columnas que ten√≠amos de datos num√©ricos por a√±o, en una sola columna de datos num√©ricos, y otra columna que contengan los a√±os a los que corresponde cada observaci√≥n.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pib_regional_long</span> <span class="o">&lt;-</span> <span class="n">pib_regional</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">pivot_longer</span><span class="p">(</span><span class="n">cols</span> <span class="o">=</span> <span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">               <span class="n">names_to</span> <span class="o">=</span> <span class="s">&#34;a√±o&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">               <span class="n">values_to</span> <span class="o">=</span> <span class="s">&#34;valor&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>Ahora, es muy sencillo calcular la variaci√≥n porcentual entre una observaci√≥n y otra: agrupamos los datos por regi√≥n, y calculamos cada valor dividido por el valor anterior (la celda de arriba, obtenida con <code>lag()</code>):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">pib_regional_cambio</span> <span class="o">&lt;-</span> <span class="n">pib_regional_long</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># ordenar observaciones</span>
</span></span><span class="line"><span class="cl">  <span class="nf">arrange</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">a√±o</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">group_by</span><span class="p">(</span><span class="n">region</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># calcular cambio</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">cambio</span> <span class="o">=</span> <span class="n">valor</span><span class="o">/</span><span class="nf">lag</span><span class="p">(</span><span class="n">valor</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">         <span class="n">cambio</span> <span class="o">=</span> <span class="m">1</span> <span class="o">-</span> <span class="n">cambio</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ungroup</span><span class="p">()</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">cambio</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pib_regional_cambio</span>
</span></span></code></pre></div><pre><code># A tibble: 96 √ó 4
   region                           a√±o   valor    cambio
   &lt;chr&gt;                            &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;
 1 Regi√≥n Metropolitana de Santiago 2019  78931 -0.00915 
 2 Regi√≥n Metropolitana de Santiago 2020  72170  0.0857  
 3 Regi√≥n Metropolitana de Santiago 2021  81945 -0.135   
 4 Regi√≥n Metropolitana de Santiago 2022  84131 -0.0267  
 5 Regi√≥n Metropolitana de Santiago 2023  84396 -0.00315 
 6 Regi√≥n Metropolitana de Santiago 2024  85941 -0.0183  
 7 Regi√≥n de Antofagasta            2019  15983  0.000188
 8 Regi√≥n de Antofagasta            2020  15697  0.0179  
 9 Regi√≥n de Antofagasta            2021  15560  0.00873 
10 Regi√≥n de Antofagasta            2022  15562 -0.000129
# ‚Ñπ 86 more rows
</code></pre>
<p>Con nuestra nueva variable <code>cambio</code> calculada, ahora volvemos a transformar los datos para que est√©n en el formato <em>ancho</em>; es decir, nuevamente cada celda ubicada en una columna distinta dependiendo del a√±o al cual corresponde. As√≠, volvemos a obtener seis columnas de datos num√©ricos, una para cada a√±o, pero esta vez con la diferencia porcentual de los valores en vez del valor absoluto.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">pib_regional_cambio_wide</span> <span class="o">&lt;-</span> <span class="n">pib_regional_cambio</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">select</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">a√±o</span><span class="p">,</span> <span class="n">cambio</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">pivot_wider</span><span class="p">(</span><span class="n">names_from</span> <span class="o">=</span> <span class="n">a√±o</span><span class="p">,</span> <span class="n">values_from</span> <span class="o">=</span> <span class="n">cambio</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pib_regional_cambio_wide</span>
</span></span></code></pre></div><pre><code># A tibble: 16 √ó 7
   region                    `2019`   `2020`   `2021`   `2022`   `2023`   `2024`
   &lt;chr&gt;                      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1 Regi√≥n Metropolitana d‚Ä¶ -9.15e-3  0.0857  -0.135   -2.67e-2 -0.00315 -0.0183 
 2 Regi√≥n de Antofagasta    1.88e-4  0.0179   0.00873 -1.29e-4 -0.0339  -0.0726 
 3 Regi√≥n de Arica y Pari‚Ä¶  9.77e-3  0.0620  -0.168   -7.14e-2 -0.0186   0.00943
 4 Regi√≥n de Atacama        4.31e-2 -0.00340 -0.118   -8.34e-3 -0.0113  -0.0111 
 5 Regi√≥n de Ays√©n del Ge‚Ä¶ -1.22e-2  0.0845  -0.0334  -1.87e-2 -0.0826   0.00231
 6 Regi√≥n de Coquimbo      -1.36e-2  0.0500  -0.0903   6.97e-3 -0.0302  -0.0133 
 7 Regi√≥n de La Araucan√≠a  -1.60e-2  0.0469  -0.125   -4.34e-2 -0.0195  -0.0301 
 8 Regi√≥n de Los Lagos     -2.20e-2  0.0515  -0.0798  -3.50e-2 -0.0129  -0.0155 
 9 Regi√≥n de Los R√≠os      -2.00e-3  0.0400  -0.0982  -2.65e-2  0.00111 -0.0425 
10 Regi√≥n de Magallanes y‚Ä¶ -4.94e-2  0.127   -0.0734  -5.46e-2 -0.0162  -0.0561 
11 Regi√≥n de Tarapac√°      -5.01e-2  0.0396  -0.0908  -1.61e-2 -0.0316  -0.0404 
12 Regi√≥n de Valpara√≠so     2.93e-3  0.0617  -0.101   -5.91e-2 -0.00197 -0.0172 
13 Regi√≥n de √ëuble         -3.96e-3  0.0334  -0.120   -3.48e-2  0.0176  -0.0359 
14 Regi√≥n del Biob√≠o       -1.43e-2  0.0551  -0.0919  -2.85e-2 -0.0586  -0.0251 
15 Regi√≥n del Libertador ‚Ä¶  6.05e-3  0.0372  -0.0950  -2.17e-3  0.0140  -0.0578 
16 Regi√≥n del Maule         5.29e-3  0.0139  -0.0854  -3.23e-2 -0.0187  -0.0520 
</code></pre>
<p>Generamos una nueva tabla <code>{gt}</code> con las diferencias porcentuales entre a√±os, especificando que estas columnas num√©ricas ahora son porcentajes:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pib_regional_2</span> <span class="o">&lt;-</span> <span class="n">pib_regional_cambio_wide</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">gt</span><span class="p">()</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">cols_align</span><span class="p">(</span><span class="s">&#34;right&#34;</span><span class="p">,</span> <span class="n">region</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">fmt_percent</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">              <span class="n">decimals</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">dec_mark</span> <span class="o">=</span> <span class="s">&#34;,&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">cols_label</span><span class="p">(</span><span class="n">region</span> <span class="o">=</span> <span class="s">&#34;Regi√≥n&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_2.png"/>
</div>




<h3 id="colorear-m√∫ltiples-columnas-simult√°neamente">Colorear m√∫ltiples columnas simult√°neamente
  <a href="#colorear-m%c3%baltiples-columnas-simult%c3%a1neamente"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Ahora que tenemos una cuadr√≠cula de valores num√©ricos en nuestra tabla, resulta conveniente aplicar color a cada celda dependiendo de su valor. Esto permite una interpretaci√≥n m√°s r√°pida de una gran cantidad de datos, debido a que segu√≠a la vista hacia los valores an√≥malos o destacables, Y se facilita la interpretaci√≥n de patrones generales en los datos a partir del color.</p>
<p>Usamos la funci√≥n <code>data_color()</code> para colorizar las columnas, aprovechando las selecci√≥n de columnas con la funci√≥n <code>where(is.numeric)</code> para aplicar el color a todas las columnas num√©ricas de una sola vez. Usaremos la paleta 
<a href="https://github.com/sjmgarnier/viridis" target="_blank" rel="noopener">viridis</a>, que facilita la interpretaci√≥n de diferencia en los datos, y adem√°s es inclusiva para personas dalt√≥nicas.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pib_regional_3</span> <span class="o">&lt;-</span> <span class="n">tabla_pib_regional_2</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">data_color</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">             <span class="n">method</span> <span class="o">=</span> <span class="s">&#34;numeric&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">palette</span> <span class="o">=</span> <span class="s">&#34;viridis&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_3.png"/>
</div>
<p>Otra opci√≥n es especificar que los colores se apliquen solamente al texto, para generar una tabla m√°s liviana a la vista. Especificamos una paleta b√°sica que va de rojo a verde pasando por negro. Usamos el m√©todo <code>bin</code> para segmentar los colores en rangos discretos, en vez de usar un degradado de colores, para facilitar la interpretaci√≥n. Los rangos para cada uno de los colores se establece en el argumento <code>bins</code>, donde definimos que el color rojo se va aplicar a valores hasta -2%, luego negro del -2% al 2%, y de ah√≠ en adelante verde.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pib_regional_4</span> <span class="o">&lt;-</span> <span class="n">tabla_pib_regional_2</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">data_color</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">             <span class="n">method</span> <span class="o">=</span> <span class="s">&#34;bin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">apply_to</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">palette</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;#bf2f2f&#34;</span><span class="p">,</span> <span class="s">&#34;black&#34;</span><span class="p">,</span> <span class="s">&#34;#279f2b&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">             <span class="n">bins</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="o">-</span><span class="kc">Inf</span><span class="p">,</span> <span class="m">-0.02</span><span class="p">,</span> <span class="m">0.02</span><span class="p">,</span> <span class="kc">Inf</span><span class="p">))</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_4.png"/>
</div>
<p>Usamos categor√≠as de colores en vez de degradados para facilitar la interpretaci√≥n, debido a que los degradados tendr√≠an demasiados valores de color en una cuadr√≠cula que ya es suficientemente compleja, dificultando que las personas asocian r√°pidamente diferentes sombras de rojo o de verde a interpretaciones significativas. En lugar de eso, simplificamos la interpretaci√≥n al solamente colorear valores negativos y positivos, y mantener un rango de valores dentro de la normalidad que carecen de un color distintivo (negro).</p>
<p>Finalmente, aplicamos m√°s personalizaciones de estilo a la tabla para que resulte m√°s atractiva:</p>
<ul>
<li>Limitar el ancho de la primera columna con <code>cols_width()</code></li>
<li>Aplicar negritas a los nombres de variables e it√°licas a la primera columna con <code>tab_style()</code></li>
<li>Eliminar las l√≠neas horizontales de arriba y abajo de la tabla</li>
<li>Disminuir el espaciado interior de las celdas para aumentar la densidad de informaci√≥n con <code>tab_options(data_row.padding = px(6))</code></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tabla_pib_regional_5</span> <span class="o">&lt;-</span> <span class="n">tabla_pib_regional_4</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># ancho m√°ximo de columna regi√≥n</span>
</span></span><span class="line"><span class="cl">  <span class="nf">cols_width</span><span class="p">(</span><span class="n">region</span> <span class="o">~</span> <span class="nf">px</span><span class="p">(</span><span class="m">220</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># filas alternas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">opt_row_striping</span><span class="p">()</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># estilo de columnas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">weight</span> <span class="o">=</span> <span class="s">&#34;bold&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_column_labels</span><span class="p">())</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="s">&#34;italic&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">region</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># eliminar l√≠neas horizontales de arriba y abajo</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">table.border.top.style</span> <span class="o">=</span> <span class="s">&#34;hidden&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">table.border.bottom.style</span> <span class="o">=</span> <span class="s">&#34;hidden&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># cambiar el espaciado interno de las celdas</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_options</span><span class="p">(</span><span class="n">data_row.padding</span> <span class="o">=</span> <span class="nf">px</span><span class="p">(</span><span class="m">6</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># t√≠tulo y fuentes</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_header</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">&#34;Producto Interno Bruto regional&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&#34;Variaci√≥n anual, por regiones&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_source_note</span><span class="p">(</span><span class="s">&#34;Fuente: Banco Central de Chile&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_5.png"/>
</div>




<h3 id="estilo-condicional-a-trav√©s-de-varias-columnas">Estilo condicional a trav√©s de varias columnas
  <a href="#estilo-condicional-a-trav%c3%a9s-de-varias-columnas"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Ahora nos ubicaremos en un caso de uso m√°s complejo. Queremos destacar los valores m√°s extremos de la tabla a partir de una condicional: si los valores de las celdas son menores a -3%, queremos que el texto est√© en negritas. Como ejemplo, aplicaremos esto a una sola columna, dejando las dem√°s en gris para que se note el cambio:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># una columna</span>
</span></span><span class="line"><span class="cl"><span class="n">tabla_pib_regional_5a</span> <span class="o">&lt;-</span> <span class="n">tabla_pib_regional_5</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#34;grey70&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">`2019`</span><span class="o">:</span><span class="n">`2022`</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">weight</span> <span class="o">=</span> <span class="s">&#34;bold&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">`2023`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                   <span class="n">rows</span> <span class="o">=</span> <span class="n">`2023`</span> <span class="o">&lt;</span> <span class="m">-0.03</span><span class="p">))</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_5a.png"/>
</div>
<p>Si bien esto funciona, el problema que vamos a tener radica en que cada especificaci√≥n de las columnas a las que va a aplicar el estilo dependen tambi√©n de la evaluaci√≥n de la condicional en la misma columna. En el fondo, que un valor adquiera o no el estilo depende de si est√° en la columna, y si la fila de <em>esa misma</em> columna cumple con la condici√≥n establecida. Entonces, si queremos aplicar lo mismo a otra columna, habr√≠a que modificar tanto la columna como la condici√≥n, porque la condici√≥n depende tambi√©n de la columna.</p>
<p>Entonces, ¬øqu√© hacer si queremos aplicar lo mismo a m√°s de una columna? Podemos repetir el llamado de <code>tab_style()</code> para cada uno de los a√±os, o bien, podemos hacer un solo llamado a <code>tab_style()</code>, pero especificando m√°s de una combinaci√≥n de columna/fila en <code>locations</code> al mismo tiempo:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># dos columnas</span>
</span></span><span class="line"><span class="cl"><span class="n">tabla_pib_regional_5b</span> <span class="o">&lt;-</span> <span class="n">tabla_pib_regional_5</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#34;grey70&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">`2019`</span><span class="o">:</span><span class="n">`2021`</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">weight</span> <span class="o">=</span> <span class="s">&#34;bold&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">`2022`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">rows</span> <span class="o">=</span> <span class="n">`2022`</span> <span class="o">&lt;</span> <span class="m">-0.03</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                             <span class="nf">cells_body</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">`2023`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">rows</span> <span class="o">=</span> <span class="n">`2023`</span> <span class="o">&lt;</span> <span class="m">-0.03</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_5b.png"/>
</div>
<p>Esto funciona porque se puede entregar a <code>locations</code> una lista con m√∫ltiples funciones que especifiquen el lugar en la tabla en que se quiere aplicar el estilo.</p>
<p>Sin embargo, esta soluci√≥n se volver√≠a extremadamente repetitiva si queremos aplicarlo a seis columnas o m√°s. Habr√≠a que escribir manualmente la especificaci√≥n de <code>cells_body()</code> para cada una de las combinaciones de a√±os y filas.</p>
<p>A continuaci√≥n comparto una soluci√≥n a este problema que involucra una iteraci√≥n sobre los nombres de las columnas usando <code>purrr::map()</code>. La idea es que, si el argumento <code>locations</code> acepta m√∫ltiples columnas por medio de una lista (como hicimos en el paso anterior), podemos usar <code>map()</code> para especificar una sola vez la columna y la condici√≥n, y multiplicarla por todas las columnas que necesitemos.</p>
<p>Lo que estamos haciendo es una lista con m√∫ltiples instancias de <code>cells_body()</code>, una para cada elemento en el vector <code>columnas</code>. Dentro de <code>cells_body()</code> se usa la sintaxis <code>!!sym()</code> para transformar el nombre de una columna escrito como texto a un <em>s√≠mbolo</em>, para poder hacer la comparaci√≥n apropiadamente (porque no se puede hacer <code>&quot;1&quot; &lt; 0</code>, tiene que ser <code>1 &lt; 0</code>).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># m√∫ltiples columnas con filas condicionales</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># obtener nombres de columas a las que queremos aplicar el estilo</span>
</span></span><span class="line"><span class="cl"><span class="n">columnas</span> <span class="o">&lt;-</span> <span class="n">pib_regional_cambio_wide</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">))</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">names</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">tabla_pib_regional_5c</span> <span class="o">&lt;-</span> <span class="n">tabla_pib_regional_5</span> <span class="o">|&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">tab_style</span><span class="p">(</span><span class="n">style</span> <span class="o">=</span> <span class="nf">cell_text</span><span class="p">(</span><span class="n">weight</span> <span class="o">=</span> <span class="s">&#34;bold&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># aplicar el estilo a todas las columnas, iterando la funci√≥n cells_body por los nombres de columnas</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span> <span class="o">=</span> <span class="n">purrr</span><span class="o">::</span><span class="nf">map</span><span class="p">(</span><span class="n">columnas</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                                   <span class="o">~</span><span class="nf">cells_body</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">columns</span> <span class="o">=</span> <span class="n">.x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">rows</span> <span class="o">=</span> <span class="o">!!</span><span class="nf">sym</span><span class="p">(</span><span class="n">.x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="m">-0.03</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                                   <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></div><div style="background-color:white;padding:12px;border-radius:5px;max-width:480px;">
<img src="tabla_pib_regional_5c.png"/>
</div>
<p>De esta forma, usamos un poco de magia de iteraciones con <code>{purrr}</code> y sintaxis avanzada de R con <code>{rlang}</code> para poder aplicar un formato condicional a m√∫ltiples columnas de una tabla.</p>
<hr>




<h2 id="otros-recursos-para-tablas-gt">Otros recursos para tablas <code>{gt}</code>
  <a href="#otros-recursos-para-tablas-gt"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<ul>
<li>Documentaci√≥n oficial: 
<a href="https://gt.rstudio.com" target="_blank" rel="noopener">https://gt.rstudio.com</a></li>
<li>
<a href="https://themockup.blog/static/resources/gt-cookbook.html#table-customization" target="_blank" rel="noopener">https://themockup.blog/static/resources/gt-cookbook.html#table-customization</a></li>
<li>
<a href="https://gt.albert-rapp.de" target="_blank" rel="noopener">https://gt.albert-rapp.de</a></li>
</ul>
<hr>
<p>Si este tutorial te sirvi√≥, por favor considera hacerme una peque√±a donaci√≥n para poder tomarme un cafecito mientras escribo el siguiente tutorial ü•∫</p>
<p><div style = "height: 18px;">
</div>
<div>
  <div style="display: flex;
  justify-content: center;
  align-items: center;">
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="bastimapache" data-color="#FFDD00" data-emoji="‚òï"  data-font="Cookie" data-text="Reg√°lame un cafecito" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
  </div>
</p>
 
    </section>
      
    <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="http://localhost:4512/blog/tutorial_mapa_chile/">&larr; Crea un mapa de Chile y visualiza datos comunales y regionales con mapas en R</a>
  
  
  
    <a class="next dtc pl2 tr v-top fw6"
    href="http://localhost:4512/blog/contar_dias_habiles/">Contar d√≠as h√°biles entre dos fechas en R &rarr;</a>
  
</div>

    </footer>
    
  </article>
    
    <div class="post-comments pa0 pa4-l mt4">
  
    
      <script src="https://utteranc.es/client.js"
              repo="bastianolea/blog-bastianolea-r"
              issue-term="pathname"
              theme="github-light"
              label="comments"
              crossorigin="anonymous"
              async
              type="text/javascript">
      </script>
    
  
</div>

    
</section>
  

<section class="post-body pt5 pb4">
  
  <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Fecha de publicaci√≥n:</dt>
    <dd class="fw5 ml0">November 19, 2024</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Extensi√≥n:</dt>
    <dd class="fw5 ml0">27 minute read, 5608 words</dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Categor√≠as:</dt>
    <dd class="fw5 ml0"> <a href="http://localhost:4512/categories/tutoriales">tutoriales</a> </dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Tags:</dt>
    <dd class="fw5 ml0"> <a href="http://localhost:4512/tags/tablas">tablas</a>  <a href="http://localhost:4512/tags/web-scraping">web scraping</a>  <a href="http://localhost:4512/tags/chile">Chile</a> </dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Ver tambi√©n:</dt>
    
    <dd class="fw5 ml0"><a href="../../blog/grupo_usuarixs_r/">Grupo de usuarios/as de R</a></dd>
    
    <dd class="fw5 ml0"><a href="../../blog/elecciones_presidenciales_2025/">Visualizaci√≥n y scraping de resultados de las elecciones presidenciales 2025</a></dd>
    
    <dd class="fw5 ml0"><a href="../../blog/delincuencia_prensa/">Comparaci√≥n entre estad√≠sticas oficiales de delincuencia y la cobertura de la delincuencia en medios de comunicaci√≥n</a></dd>
    
  </dl>
</details>

</section>
</main>


<aside class="page-sidebar" role="complementary">
   
   

  <div class="blog-info ph4 pt4 pb4 pb0-l">
    

  <h1 class="f3">Blog</h1>
  <p class="f6 lh-copy measure">Tutoriales, rese√±as y consejos sobre R para an√°lisis de datos. Usa el 
<a href="https://bastianoleah.shinyapps.io/buscador/" target="_blank" rel="noopener">buscador</a> para encontrar publicaciones o navega los 
<a href="../../tags/">temas</a>.</p>
  

   
<h3 style="margin-bottom: 12px;">Temas:</h3>

<div style="font-size:90%;">

<div style="font-size: 90%;">
  
   
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/chile/">Chile</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/datos/">Datos</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/consejos/">Consejos</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/visualizaci%C3%B3n-de-datos/">Visualizaci√≥n de datos</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/gr%C3%A1ficos/">Gr√°ficos</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/ggplot2/">Ggplot2</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/blog/">Blog</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/apps/">Apps</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/shiny/">Shiny</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/web-scraping/">Web scraping</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/limpieza-de-datos/">Limpieza de datos</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/mapas/">Mapas</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/procesamiento-de-datos/">Procesamiento de datos</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/b%C3%A1sico/">B√°sico</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/quarto/">Quarto</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/curiosidades/">Curiosidades</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/ciencias-sociales/">Ciencias sociales</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/inteligencia-artificial/">Inteligencia artificial</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/dplyr/">Dplyr</a></span>
  </span>
 
  
  <span style="margin-bottom: 10px; line-height: 1.1;">
    <span style="margin: 3px; margin-left: 1px; margin-right: 1px; 
                 word-break: none;
                 display: inline-block; 
                 white-space: nowrap;
                 font-style: normal;
                 background-color: #9069C0; 
                 border-radius: 3px;
                 padding: 2px 6px;
                 padding-top: 3px;">
    <a style="color: #EAD1FA !important; text-decoration: none;" 
      href="http://localhost:4512/tags/automatizaci%C3%B3n/">Automatizaci√≥n</a></span>
  </span>

<a href="../../tags/" style="margin-left: 3px;">y m√°s!</a>
</div>
</div>
  
  
   
   

</div>

  
  <div id="PageTableOfContents", style="margin-top: 24px; position: sticky; top: 108px;">
        <div class="blog-info ph4 pb4 pb0-l">
        <h3 style="margin-bottom: 12px;">√çndice:</h3>
          <div class="pl2 pr0 mh0" style = "font-size: 90%; margin-top: -8px; margin-left: -22px; margin-bottom: 32px;">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#tabla-de-estimaci√≥n-de-pobreza-por-comunas">Tabla de estimaci√≥n de pobreza por comunas</a>
      <ul>
        <li><a href="#formato-de-variables-num√©ricas">Formato de variables num√©ricas</a></li>
        <li><a href="#apariencia-de-columnas">Apariencia de columnas</a></li>
        <li><a href="#estilo-condicional-de-celdas">Estilo condicional de celdas</a></li>
        <li><a href="#colorear-columnas-seg√∫n-su-valor">Colorear columnas seg√∫n su valor</a></li>
        <li><a href="#estilo-avanzado-de-tablas">Estilo avanzado de tablas</a></li>
      </ul>
    </li>
    <li><a href="#tabla-de-resultados-electorales">Tabla de resultados electorales</a>
      <ul>
        <li><a href="#colorear-celdas-seg√∫n-una-variable-categ√≥rica-o-factor">Colorear celdas seg√∫n una variable categ√≥rica o factor</a></li>
      </ul>
    </li>
    <li><a href="#tabla-de-producto-interno-bruto-regional">Tabla de Producto Interno Bruto regional</a>
      <ul>
        <li><a href="#c√°lculo-de-diferencia-porcentual-entre-a√±os">C√°lculo de diferencia porcentual entre a√±os</a></li>
        <li><a href="#colorear-m√∫ltiples-columnas-simult√°neamente">Colorear m√∫ltiples columnas simult√°neamente</a></li>
        <li><a href="#estilo-condicional-a-trav√©s-de-varias-columnas">Estilo condicional a trav√©s de varias columnas</a></li>
      </ul>
    </li>
    <li><a href="#otros-recursos-para-tablas-gt">Otros recursos para tablas <code>{gt}</code></a></li>
  </ul>
</nav>
          </div>
        </div>
    </div>
  
  

</aside>

        
          <script id="partials/analytics.html" 
  data-goatcounter="https://bastimapache.goatcounter.com/count"
  async src="//gc.zgo.at/count.js"></script>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2025 Basti√°n Olea Herrera, Chile
      <span class="middot-divider"></span>
      Hecho con <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source" style="color:#9069C0;">Hugo Ap√©ro</a> 
      y <a href="https://pkgs.rstudio.com/blogdown/" style="color:#9069C0;">{blogdown}</a></span>.
      <br />
      
Basado en <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source" style="color:#9069C0;">Blogophonic</a></span>, de <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL" style="color:#9069C0;">Formspree</a>.

Sitio alojado en <a href="https://www.netlify.com" style="color:#9069C0;">Netlify</a></span>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bastianoleah.shinyapps.io/buscador/" title="search" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fas fa-search fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/bastianolea" title="github" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://x.com/bastimapache" title="twitter" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/bastianolea/" title="linkedin" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.tiktok.com/@bastimapache" title="tiktok" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-tiktok fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.instagram.com/raccunnie" title="instagram" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-instagram fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.goodreads.com/user/show/53224910-basti-n-olea-herrera" title="goodreads" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-goodreads fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.last.fm/user/bastimapache" title="lastfm" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-lastfm fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bsky.app/profile/bastianolea.rbind.io" title="bluesky" target="_blank" rel="me noopener"
    style="margin-bottom: 6px !important;"> 
      <i class="fab fa-bluesky fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="../../contacto/" title="envelope" 
    style="margin-bottom: 6px !important;"> 
      <i class="fas fa-envelope fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="../../about/" title="Basti√°n Olea: Sobre mi">Sobre mi</a>
      
      <a class="dib pv1 ph2 link" href="https://bastianoleah.shinyapps.io/buscador/" title="Buscador">Buscar</a>
      
      <a class="dib pv1 ph2 link" href="../../contacto/" title="Basti√°n Olea: Contacto">Contacto</a>
      
      <a class="dib pv1 ph2 link" href="../../tags/" title="Temas">Temas</a>
      
      <a class="dib pv1 ph2 link" href="../../clases/" title="Clases">Clases</a>
      
      <a class="dib pv1 ph2 link" href="../../code-of-conduct/" title="Basti√°n Olea: C√≥digo de conducta">C√≥digo de conducta</a>
      
      <a class="dib pv1 ph2 link" href="../../license/" title="Basti√°n Olea: Licencia">Licencia</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>

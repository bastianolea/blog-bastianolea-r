{
  "hash": "4920dc2ad1eba9f9abb95c679afb564e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Tutorial: introducción a {dplyr} usando datos de campamentos'\nauthor: Bastián Olea Herrera\ndate: '2024-11-09'\ndraft: false\nfreeze: true\nweight: 15\nformat: hugo-md\nslug: []\ncategories:\n  - Tutoriales\ntags:\n  - dplyr\nexcerpt: \"Tutorial de introducción al paquete `{dplyr}` para la exploración y análisis de datos con R. Está dirigido a principiantes. En este tutorial veremos cómo explorar un conjunto de datos sociohabitacionales, y a crear nuevas variables.\"\n---\n\nEste post es una introducción al paquete `{dplyr}` para la exploración y análisis de datos con R. Está dirigido a principiantes de R. Si es primera vez que usas R, te recomiendo revisar primero [este breve tutorial inicial de R.](/blog/r_introduccion/r_basico/).\n\n_En este tutorial veremos:_\n- carga de datos de Excel\n- revisar los datos\n- seleccionar columnas\n- ordenar tablas de datos\n- contar frecuencias\n- filtrar datos\n- crear variables dicotómicas\n- crear variables complejas\n\nLos datos usados en este tutorial corresponden al catastro de campamentos de Chile 2024, del [Centro de Estudios del Ministerio de Vivienda y Urbanismo.](https://geoportal-open-data-minvu-2-minvu.hub.arcgis.com/datasets/MINVU::actualizacion-catastro-campamentos-2024-1/about). El código para obtener, procesar y visualizar los datos [se encuentra en este repositorio de GitHub.](https://github.com/bastianolea/campamentos_chile)\n\n\nPara empezar, instalamos los paquetes que usaremos en este tutorial (solo se necesita hacer una vez, y sólo si es que no los tienes instalados).\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"readxl\") # cargar datos desde Excel\ninstall.packages(\"dplyr\") # manipulación de datos\n```\n:::\n\n\n\n# Cargar datos\n\nPuedes [**descargar** el archivo `campamentos_chile_2024.xlsx` que usaremos en este tutorial desde este enlace](https://raw.githubusercontent.com/bastianolea/blog-r/refs/heads/master/content/blog/r_introduccion/tutorial_dplyr_campamentos/campamentos_chile_2024.xlsx). Los datos se obtuvieron desde [este repositorio.](https://github.com/bastianolea/campamentos_chile)\n\n{{< boton \"Descargar datos en Excel\" \"https://raw.githubusercontent.com/bastianolea/blog-r/refs/heads/master/content/blog/r_introduccion/tutorial_dplyr_campamentos/campamentos_chile_2024.xlsx\" \"fas fa-file-arrow-down\">}}\n\nCargamos los datos desde Excel usando el nombre del archivo como argumento a la función `read_excel()`:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\n\ndatos <- read_excel(\"campamentos_chile_2024.xlsx\")\n\ndatos\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Bellavista Valpa… Valparaí… Valpa… 05    051    5101      29     1.51  10617.\n 2 Buena Vis… Valpa… Valparaí… Valpa… 05    051    5101      32     1.67  11707.\n 3 Los Flete… Valpa… Valparaí… Valpa… 05    051    5101      56     2.49  17465.\n 4 Pueblo Hu… Valpa… Valparaí… Valpa… 05    051    5101      65     4.60  32261.\n 5 Villa Ita… Valpa… Valparaí… Valpa… 05    051    5101      33     0.867  6081.\n 6 Nueva Esp… Valpa… Valparaí… Valpa… 05    051    5101      17     0.399  2802.\n 7 Francisco… Valpa… Valparaí… Valpa… 05    051    5101      24     2.85  19955.\n 8 Manuel Ro… Valpa… Valparaí… Valpa… 05    051    5101      21     0.443  3103.\n 9 Sofia 35   Valpa… Valparaí… Valpa… 05    051    5101      69     2.68  18819.\n10 Las Viñas… Valpa… Marga Ma… Villa… 05    058    5804      32     1.24   8704.\n# ℹ 1,422 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\n\nEste tipo de objetos tabulares se llaman _dataframes,_ específicamente _tibble,_ que es un tipo de tabla. Los dataframes son tablas de datos hechas a partir de vectores, donde cada columna es un vector del mismo largo (misma cantidad de elementos). Los dataframes se caracterizan por tener distintas columnas que pueden de distinto tipo: numéricas, caracter (texto), lógico (TRUE/FALSE), fechas, entre otras. Todas las columnas tienen el mismo largo, que es equivalente a la cantidad de filas de la tabla.\n\n\nPara explorar los datos, usaremos el paquete `{dplyr}`, que nos permite manejar datos con mayor facilidad. `{dplyr}` sirve para manipular datos a partir de funciones que emulan instrucciones sencillas, como _seleccionar, filtrar,_ etc.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n:::\n\n\nUna particularidad del uso de `{dplyr}` es el uso del operador `|>`, que es operador que nos permite conectar un objeto con una o múltiples operaciones que deseamos realizarle al objeto. \n\nEjemplo de dos operaciones encadenadas:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(nombre, hogares, hectareas) |> \n  filter(hogares > 60)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 352 × 3\n   nombre                              hogares hectareas\n   <chr>                                 <dbl>     <dbl>\n 1 Pueblo Hundido                           65      4.60\n 2 Sofia 35                                 69      2.68\n 3 Ampliación Prat-Lomas De Peñablanca     146     15.1 \n 4 Violeta Parra                           123     10.7 \n 5 Mesana Alto                             128     14.5 \n 6 Pampa Ilusión (Sector Las Torres)       195      7.04\n 7 Parcela 11                              520     44.0 \n 8 Parcela 15                              257     15.4 \n 9 Campanillas                              98      6.19\n10 La Isla                                 116      4.51\n# ℹ 342 more rows\n```\n\n\n:::\n:::\n\n\nEl conector significa que _a este objeto le hago esto otro;_ es decir, se lee como si dijera \"luego\" o \"entonces\". En este caso: _a `datos` le selecciono columnas y le aplico un filtro._\n\n## Revisar\nEjecutar el nombre del objeto nos permite que sus contenidos aparezcan en la consola de R.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Bellavista Valpa… Valparaí… Valpa… 05    051    5101      29     1.51  10617.\n 2 Buena Vis… Valpa… Valparaí… Valpa… 05    051    5101      32     1.67  11707.\n 3 Los Flete… Valpa… Valparaí… Valpa… 05    051    5101      56     2.49  17465.\n 4 Pueblo Hu… Valpa… Valparaí… Valpa… 05    051    5101      65     4.60  32261.\n 5 Villa Ita… Valpa… Valparaí… Valpa… 05    051    5101      33     0.867  6081.\n 6 Nueva Esp… Valpa… Valparaí… Valpa… 05    051    5101      17     0.399  2802.\n 7 Francisco… Valpa… Valparaí… Valpa… 05    051    5101      24     2.85  19955.\n 8 Manuel Ro… Valpa… Valparaí… Valpa… 05    051    5101      21     0.443  3103.\n 9 Sofia 35   Valpa… Valparaí… Valpa… 05    051    5101      69     2.68  18819.\n10 Las Viñas… Valpa… Marga Ma… Villa… 05    058    5804      32     1.24   8704.\n# ℹ 1,422 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\nPor defecto, la consola nos muestra 10 filas de la tabla. Si queremos ver más filas podemos usar la función `print()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  print(n = 20)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Bellavista Valpa… Valparaí… Valpa… 05    051    5101      29     1.51  1.06e4\n 2 Buena Vis… Valpa… Valparaí… Valpa… 05    051    5101      32     1.67  1.17e4\n 3 Los Flete… Valpa… Valparaí… Valpa… 05    051    5101      56     2.49  1.75e4\n 4 Pueblo Hu… Valpa… Valparaí… Valpa… 05    051    5101      65     4.60  3.23e4\n 5 Villa Ita… Valpa… Valparaí… Valpa… 05    051    5101      33     0.867 6.08e3\n 6 Nueva Esp… Valpa… Valparaí… Valpa… 05    051    5101      17     0.399 2.80e3\n 7 Francisco… Valpa… Valparaí… Valpa… 05    051    5101      24     2.85  2.00e4\n 8 Manuel Ro… Valpa… Valparaí… Valpa… 05    051    5101      21     0.443 3.10e3\n 9 Sofia 35   Valpa… Valparaí… Valpa… 05    051    5101      69     2.68  1.88e4\n10 Las Viñas… Valpa… Marga Ma… Villa… 05    058    5804      32     1.24  8.70e3\n11 Lomas De … Valpa… Marga Ma… Villa… 05    058    5804      42     3.97  2.78e4\n12 Manzana 33 Valpa… Marga Ma… Villa… 05    058    5804      37     2.19  1.53e4\n13 Ampliació… Valpa… Marga Ma… Villa… 05    058    5804     146    15.1   1.06e5\n14 Los Artes… Valpa… Valparaí… Viña … 05    051    5109      35     2.00  1.40e4\n15 La Unión … Valpa… Valparaí… Viña … 05    051    5109      20     1.33  9.30e3\n16 John Kenn… Valpa… Valparaí… Valpa… 05    051    5101      48     0.858 6.01e3\n17 Pezoa Vel… Valpa… Valparaí… Valpa… 05    051    5101      22     0.194 1.36e3\n18 Violeta P… Valpa… Valparaí… Valpa… 05    051    5101     123    10.7   7.50e4\n19 Cristo Re… Valpa… Valparaí… Valpa… 05    051    5101      53     0.862 6.04e3\n20 Loma Vist… Valpa… Valparaí… Viña … 05    051    5109      47     1.19  8.34e3\n# ℹ 1,412 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\nLas funciones `head()` y `tails()` te muestran las primeras o últimas filas de la tabla, respectivamente. Si la combinas con `print()`, puedes consultar la cantidad que quieras de filas al principio o final de tu tabla.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ver últimas 20 filas\ndatos |> \n  tail(20) |> \n  print(n=Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 20 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Longitudi… Valpa… Marga Ma… Villa… 05    058    5804      14     0.681 4.78e3\n 2 Comunidad… Valpa… Marga Ma… Villa… 05    058    5804      36     1.28  8.97e3\n 3 Nueva Tol… Valpa… Marga Ma… Villa… 05    058    5804      10     0.305 2.14e3\n 4 Toma Nuev… Metro… Cordille… Puent… 13    132   13201       0     0     0     \n 5 Villa Res… Valpa… San Anto… Carta… 05    056    5601      48     6.15  4.26e4\n 6 Sector Lí… La Ar… Malleco   Traig… 09    092    9210      15     2.56  1.58e4\n 7 Licantatay Antof… El Loa    Calama 02    022    2201      41     6.27  5.33e4\n 8 Nuevo Ama… Antof… El Loa    Calama 02    022    2201      41    47.4   4.03e5\n 9 Barrio Tr… Antof… El Loa    Calama 02    022    2201       0    55.3   4.69e5\n10 Calameños… Antof… El Loa    Calama 02    022    2201      91     4.41  3.74e4\n11 Tres Band… Antof… Antofaga… Taltal 02    021    2104       0     2.39  1.94e4\n12 Sauce 3    Valpa… Valparaí… Viña … 05    051    5109       0     3.35  2.35e4\n13 Campament… Antof… Antofaga… Antof… 02    021    2101       0     0.450 3.76e3\n14 Campament… Antof… Tocopilla Tocop… 02    023    2301      27     5.52  4.72e4\n15 Luz Divin… Antof… Antofaga… Antof… 02    021    2101       0     0.934 7.81e3\n16 Villa Esp… Antof… Antofaga… Antof… 02    021    2101       0     0.623 5.20e3\n17 Valle Her… Biobío Arauco    Los A… 08    082    8206      71     8.18  5.14e4\n18 Rucamanque Biobío Concepci… Talca… 08    081    8110     119     5.24  3.37e4\n19 Caleta Co… Antof… Tocopilla Tocop… 02    023    2301       0     5.38  4.56e4\n20 Caleta Co… Antof… Tocopilla Tocop… 02    023    2301       0     1.00  8.52e3\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\n\nUna función útil para poder revisar los datos rápidamente de una forma distinta es `glimpse()`, que nos muestra la tabla pero con las columnas hacia abajo y los valores hacia el lado. Es como ver la tabla girada, permitiéndonos ver todas sus columnas, sus formatos, y un ejemplo de las primeras observaciones de cada variable.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,432\nColumns: 12\n$ nombre        <chr> \"Bellavista\", \"Buena Vista\", \"Los Fleteros\", \"Pueblo Hun…\n$ region        <chr> \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", …\n$ provincia     <chr> \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", …\n$ comuna        <chr> \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", …\n$ cut_r         <chr> \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"0…\n$ cut_p         <chr> \"051\", \"051\", \"051\", \"051\", \"051\", \"051\", \"051\", \"051\", …\n$ cut           <dbl> 5101, 5101, 5101, 5101, 5101, 5101, 5101, 5101, 5101, 58…\n$ hogares       <dbl> 29, 32, 56, 65, 33, 17, 24, 21, 69, 32, 42, 37, 146, 35,…\n$ hectareas     <dbl> 1.5138015, 1.6700459, 2.4914854, 4.6023230, 0.8673470, 0…\n$ area          <dbl> 10617.233, 11707.446, 17465.450, 32261.178, 6080.654, 28…\n$ observaciones <chr> \"CAMPAMENTO EN CATASTRO NACIONAL 2022. EXTENSIÓN DE LÍMI…\n$ año           <chr> \"CATASTRO_2011\", \"CATASTRO_2011\", \"CATASTRO_2011\", \"CATA…\n```\n\n\n:::\n:::\n\n\nLa función `slice()` permite extraer filas específicas de la tabla, según su posición. Por ejemplo, aquí extraeremos las filas número 1000 al 1010:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  slice(1000:1010)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 11 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Batuco     Metro… Chacabuco Lampa  13    133   13302      84    11.5   7.99e4\n 2 Jerusalén  Metro… Chacabuco Lampa  13    133   13302     565    32.1   2.24e5\n 3 Borde Rio… Liber… Cachapoal Doñih… 06    061    6105       0    10.5   7.15e4\n 4 Toma Vist… Metro… Chacabuco Lampa  13    133   13302     539    14.5   1.01e5\n 5 Medialuna… Metro… Chacabuco Lampa  13    133   13302     104     2.23  1.56e4\n 6 Puente Li… Liber… Cachapoal Malloa 06    061    6109       0     1.75  1.18e4\n 7 Mirador    Metro… Chacabuco Lampa  13    133   13302     117     5.37  3.74e4\n 8 Esperando… Liber… Cachapoal Rengo  06    061    6115       0     1.15  7.84e3\n 9 Central L… Metro… Chacabuco Lampa  13    133   13302      14     1.79  1.25e4\n10 Los Tronc… Liber… Cachapoal Rengo  06    061    6115       0     0.970 6.59e3\n11 Los Tubos  Metro… Maipo     Buin   13    134   13402      27     0.864 5.95e3\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\n\n\n## Ordenar\nOrdenar observaciones en base a una o varias columnas\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  arrange(nombre)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 05 De Abr… Ataca… Copiapó   Copia… 03    031    3101      27     1.11  8.71e3\n 2 10 De Ago… Tarap… Iquique   Alto … 01    011    1107     104     1.63  1.43e4\n 3 12 De Feb… Liber… Cachapoal Macha… 06    061    6108      47    12.7   8.64e4\n 4 12 De May… Metro… Chacabuco Colina 13    133   13301     148     2.16  1.51e4\n 5 12 De Oct… Ataca… Copiapó   Copia… 03    031    3101      12     0.791 6.22e3\n 6 13 De Jun… Tarap… Tamarugal Pozo … 01    014    1401       0     0.224 1.96e3\n 7 14 de feb… La Ar… Cautín    Temuco 09    091    9101       0     0.635 3.86e3\n 8 15 De Feb… Ataca… Copiapó   Copia… 03    031    3101      16     0.499 3.92e3\n 9 17 De Mayo Metro… Santiago  Cerro… 13    131   13103     158    15.7   1.09e5\n10 18 De Oct… Valpa… Marga Ma… Villa… 05    058    5804      18     1.15  8.04e3\n# ℹ 1,422 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\ndatos |> \n  arrange(desc(hogares))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Alto Molle Tarap… Iquique   Alto … 01    011    1107    3390     130.  1.14e6\n 2 Manuel Bu… Valpa… Valparaí… Viña … 05    051    5109    1647      90.2 6.33e5\n 3 América I… Metro… Santiago  Cerri… 13    131   13102    1550      29.8 2.07e5\n 4 Dignidad   Metro… Chacabuco Colina 13    133   13301    1004      15.8 1.10e5\n 5 Milla Ant… Metro… Cordille… Puent… 13    132   13201    1001      23.0 1.59e5\n 6 Comité de… Antof… Antofaga… Antof… 02    021    2101    1000      14.8 1.24e5\n 7 Centinela… Valpa… San Anto… San A… 05    056    5601     833     111.  7.69e5\n 8 Vista Her… Valpa… San Anto… Carta… 05    056    5603     789      64.6 4.48e5\n 9 Aguas Sal… Valpa… San Anto… San A… 05    056    5601     688      45.1 3.12e5\n10 Felipe Ca… Valpa… Valparaí… Viña … 05    051    5109     669      37.0 2.59e5\n# ℹ 1,422 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\ndatos |> \n  arrange(comuna, desc(hogares)) |> \n  select(nombre, comuna, hogares)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   nombre             comuna        hogares\n   <chr>              <chr>           <dbl>\n 1 Las Quilas II      Aisén              83\n 2 Las Avutardas      Aisén              16\n 3 CAMINO CEMENTERIO  Aisén               8\n 4 Almirante Simpson  Aisén               0\n 5 Pueblo Hundido     Alto Biobío        30\n 6 Pueblo Hundido     Alto Biobío        13\n 7 Sector Pangue      Alto Biobío        10\n 8 Alto Molle         Alto Hospicio    3390\n 9 Ex Vertedero Norte Alto Hospicio     394\n10 La Pampa 2         Alto Hospicio     347\n# ℹ 1,422 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ndatos |> glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,432\nColumns: 12\n$ nombre        <chr> \"Bellavista\", \"Buena Vista\", \"Los Fleteros\", \"Pueblo Hun…\n$ region        <chr> \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", …\n$ provincia     <chr> \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", …\n$ comuna        <chr> \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", \"Valparaíso\", …\n$ cut_r         <chr> \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"05\", \"0…\n$ cut_p         <chr> \"051\", \"051\", \"051\", \"051\", \"051\", \"051\", \"051\", \"051\", …\n$ cut           <dbl> 5101, 5101, 5101, 5101, 5101, 5101, 5101, 5101, 5101, 58…\n$ hogares       <dbl> 29, 32, 56, 65, 33, 17, 24, 21, 69, 32, 42, 37, 146, 35,…\n$ hectareas     <dbl> 1.5138015, 1.6700459, 2.4914854, 4.6023230, 0.8673470, 0…\n$ area          <dbl> 10617.233, 11707.446, 17465.450, 32261.178, 6080.654, 28…\n$ observaciones <chr> \"CAMPAMENTO EN CATASTRO NACIONAL 2022. EXTENSIÓN DE LÍMI…\n$ año           <chr> \"CATASTRO_2011\", \"CATASTRO_2011\", \"CATASTRO_2011\", \"CATA…\n```\n\n\n:::\n\n```{.r .cell-code}\ndatos2 <- datos |> \n  select(1:4) |> \n  slice_sample(n = 10)\n```\n:::\n\n\n\n## Seleccionar \nPodemos reducir la cantidad de columnas de nuestra tabla usando `select()`. Esto puede servirnos para acotar la exploración de los datos, cuando no necesitamos ver todas las columnas al mismo tiempo.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(nombre, hectareas)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 2\n   nombre                  hectareas\n   <chr>                       <dbl>\n 1 Bellavista                  1.51 \n 2 Buena Vista                 1.67 \n 3 Los Fleteros                2.49 \n 4 Pueblo Hundido              4.60 \n 5 Villa Italia Turín          0.867\n 6 Nueva Esperanza             0.399\n 7 Francisco Vergara           2.85 \n 8 Manuel Rodríguez            0.443\n 9 Sofia 35                    2.68 \n10 Las Viñas De Irene Frei     1.24 \n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\nAnte poniendo un signo menos antes del nombre de una columna podemos excluirla de nuestra tabla.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(-cut, -cut_r, -cut_p)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 9\n   nombre   region provincia comuna hogares hectareas   area observaciones año  \n   <chr>    <chr>  <chr>     <chr>    <dbl>     <dbl>  <dbl> <chr>         <chr>\n 1 Bellavi… Valpa… Valparaí… Valpa…      29     1.51  10617. CAMPAMENTO E… CATA…\n 2 Buena V… Valpa… Valparaí… Valpa…      32     1.67  11707. CAMPAMENTO E… CATA…\n 3 Los Fle… Valpa… Valparaí… Valpa…      56     2.49  17465. CAMPAMENTO E… CATA…\n 4 Pueblo … Valpa… Valparaí… Valpa…      65     4.60  32261. CAMPAMENTO E… CATA…\n 5 Villa I… Valpa… Valparaí… Valpa…      33     0.867  6081. CAMPAMENTO E… CATA…\n 6 Nueva E… Valpa… Valparaí… Valpa…      17     0.399  2802. CAMPAMENTO E… CATA…\n 7 Francis… Valpa… Valparaí… Valpa…      24     2.85  19955. CAMPAMENTO E… CATA…\n 8 Manuel … Valpa… Valparaí… Valpa…      21     0.443  3103. CAMPAMENTO E… CATA…\n 9 Sofia 35 Valpa… Valparaí… Valpa…      69     2.68  18819. CAMPAMENTO E… CATA…\n10 Las Viñ… Valpa… Marga Ma… Villa…      32     1.24   8704. CAMPAMENTO E… CATA…\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\nRecordemos que, hasta que no asignemos estas operaciones a un nuevo objeto, no estamos modificando nuestros datos realmente, sino que solamente estamos aplicando operaciones sobre los datos de una forma no destructiva, como exploración o a modo de prueba.\n\nLa función selecta acepta diversas formas de poder seleccionar o de seleccionar variables en base a sus nombres.\n\nExcluir columnas que incluyan cierto texto dentro de sus nombres:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(-contains(\"cut\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 9\n   nombre   region provincia comuna hogares hectareas   area observaciones año  \n   <chr>    <chr>  <chr>     <chr>    <dbl>     <dbl>  <dbl> <chr>         <chr>\n 1 Bellavi… Valpa… Valparaí… Valpa…      29     1.51  10617. CAMPAMENTO E… CATA…\n 2 Buena V… Valpa… Valparaí… Valpa…      32     1.67  11707. CAMPAMENTO E… CATA…\n 3 Los Fle… Valpa… Valparaí… Valpa…      56     2.49  17465. CAMPAMENTO E… CATA…\n 4 Pueblo … Valpa… Valparaí… Valpa…      65     4.60  32261. CAMPAMENTO E… CATA…\n 5 Villa I… Valpa… Valparaí… Valpa…      33     0.867  6081. CAMPAMENTO E… CATA…\n 6 Nueva E… Valpa… Valparaí… Valpa…      17     0.399  2802. CAMPAMENTO E… CATA…\n 7 Francis… Valpa… Valparaí… Valpa…      24     2.85  19955. CAMPAMENTO E… CATA…\n 8 Manuel … Valpa… Valparaí… Valpa…      21     0.443  3103. CAMPAMENTO E… CATA…\n 9 Sofia 35 Valpa… Valparaí… Valpa…      69     2.68  18819. CAMPAMENTO E… CATA…\n10 Las Viñ… Valpa… Marga Ma… Villa…      32     1.24   8704. CAMPAMENTO E… CATA…\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\nSeleccionar columnas que empiecen con cierto texto:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(starts_with(\"com\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 1\n   comuna       \n   <chr>        \n 1 Valparaíso   \n 2 Valparaíso   \n 3 Valparaíso   \n 4 Valparaíso   \n 5 Valparaíso   \n 6 Valparaíso   \n 7 Valparaíso   \n 8 Valparaíso   \n 9 Valparaíso   \n10 Villa Alemana\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\nSeleccionar comunas que terminen con un texto determinado:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(ends_with(\"a\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   provincia   comuna          area\n   <chr>       <chr>          <dbl>\n 1 Valparaíso  Valparaíso    10617.\n 2 Valparaíso  Valparaíso    11707.\n 3 Valparaíso  Valparaíso    17465.\n 4 Valparaíso  Valparaíso    32261.\n 5 Valparaíso  Valparaíso     6081.\n 6 Valparaíso  Valparaíso     2802.\n 7 Valparaíso  Valparaíso    19955.\n 8 Valparaíso  Valparaíso     3103.\n 9 Valparaíso  Valparaíso    18819.\n10 Marga Marga Villa Alemana  8704.\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\nTambién podemos seleccionar columnas de un determinado tipo. En este caso, seleccionamos solamente las variables que sean numéricas:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(where(is.numeric))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 4\n     cut hogares hectareas   area\n   <dbl>   <dbl>     <dbl>  <dbl>\n 1  5101      29     1.51  10617.\n 2  5101      32     1.67  11707.\n 3  5101      56     2.49  17465.\n 4  5101      65     4.60  32261.\n 5  5101      33     0.867  6081.\n 6  5101      17     0.399  2802.\n 7  5101      24     2.85  19955.\n 8  5101      21     0.443  3103.\n 9  5101      69     2.68  18819.\n10  5804      32     1.24   8704.\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\n\n## Conteos\nLa función Count se aplica a una de las variables de nuestros datos, y cuenta la cantidad de observaciones que se corresponden con cada uno de los valores o niveles posibles de la variable. En otras palabras, cuenta la frecuencia de cada categoría de respuesta de la variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  count(region)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 16 × 2\n   region                                        n\n   <chr>                                     <int>\n 1 Antofagasta                                 116\n 2 Arica y Parinacota                           14\n 3 Atacama                                     121\n 4 Aysén del General Carlos Ibáñez del Campo    10\n 5 Biobío                                      225\n 6 Coquimbo                                     52\n 7 La Araucanía                                 70\n 8 Libertador General Bernardo O'Higgins        59\n 9 Los Lagos                                    67\n10 Los Ríos                                     40\n11 Magallanes y de la Antártica Chilena          3\n12 Maule                                        25\n13 Metropolitana                               168\n14 Tarapacá                                     64\n15 Valparaíso                                  374\n16 Ñuble                                        24\n```\n\n\n:::\n:::\n\n\nPodemos combinar un conteo de una variable con el ordenamiento de las filas en base al conteo realizado, resultando una tabla ordenada de mayor a menor según las observaciones contadas:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  count(region) |> \n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 16 × 2\n   region                                        n\n   <chr>                                     <int>\n 1 Valparaíso                                  374\n 2 Biobío                                      225\n 3 Metropolitana                               168\n 4 Atacama                                     121\n 5 Antofagasta                                 116\n 6 La Araucanía                                 70\n 7 Los Lagos                                    67\n 8 Tarapacá                                     64\n 9 Libertador General Bernardo O'Higgins        59\n10 Coquimbo                                     52\n11 Los Ríos                                     40\n12 Maule                                        25\n13 Ñuble                                        24\n14 Arica y Parinacota                           14\n15 Aysén del General Carlos Ibáñez del Campo    10\n16 Magallanes y de la Antártica Chilena          3\n```\n\n\n:::\n:::\n\n\nNaturalmente, es posible realizar conteos por más de una variable, mostrando las combinaciones entre ambas:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  count(region, comuna) |> \n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 195 × 3\n   region       comuna            n\n   <chr>        <chr>         <int>\n 1 Valparaíso   Viña del Mar    114\n 2 Valparaíso   Valparaíso       99\n 3 Antofagasta  Antofagasta      87\n 4 Atacama      Copiapó          82\n 5 Tarapacá     Alto Hospicio    45\n 6 La Araucanía Temuco           41\n 7 Biobío       Talcahuano       32\n 8 Valparaíso   Quilpué          32\n 9 Biobío       Lota             30\n10 Valparaíso   San Antonio      27\n# ℹ 185 more rows\n```\n\n\n:::\n:::\n\n\n\n## Filtros\nPodemos realizar una comparación sobre una columna del dataframe para filtrar las observaciones (filas), dejando solamente las filas que cumplen con la condición.\n\nPor ejemplo, filtrar solamente los casos donde la cantidad de hogares sea mayor a 80:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  filter(hogares > 80)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 239 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Ampliació… Valpa… Marga Ma… Villa… 05    058    5804     146     15.1  1.06e5\n 2 Violeta P… Valpa… Valparaí… Valpa… 05    051    5101     123     10.7  7.50e4\n 3 Mesana Al… Valpa… Valparaí… Valpa… 05    051    5101     128     14.5  1.02e5\n 4 Pampa Ilu… Valpa… Valparaí… Valpa… 05    051    5101     195      7.04 4.93e4\n 5 Parcela 11 Valpa… Valparaí… Viña … 05    051    5109     520     44.0  3.08e5\n 6 Parcela 15 Valpa… Valparaí… Viña … 05    051    5109     257     15.4  1.08e5\n 7 Campanill… Valpa… Valparaí… Valpa… 05    051    5101      98      6.19 4.34e4\n 8 La Isla    Valpa… Valparaí… Valpa… 05    051    5101     116      4.51 3.16e4\n 9 Nueva Aur… Valpa… Valparaí… Viña … 05    051    5109      91      7.47 5.24e4\n10 Valle El … Valpa… Valparaí… Viña … 05    051    5109     107      4.04 2.84e4\n# ℹ 229 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  filter(region == \"Ñuble\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 24 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Los Corre… Ñuble  Diguillín Chill… 16    161   16101      13     0.250 1.61e3\n 2 Línea Fér… Ñuble  Diguillín Chill… 16    161   16101      35     3.21  2.07e4\n 3 Litral Co… Ñuble  Diguillín Chill… 16    161   16101      26     5.33  3.43e4\n 4 Los Monte… Ñuble  Diguillín Chill… 16    161   16101      47     5.57  3.59e4\n 5 Orilla It… Ñuble  Itata     Porte… 16    162   16205      11     1.41  9.07e3\n 6 Pablo Ner… Ñuble  Itata     Quiri… 16    162   16201      39    22.7   1.47e5\n 7 Esmeralda… Ñuble  Punilla   San N… 16    163   16305      13     0.232 1.50e3\n 8 Santa Lau… Ñuble  Punilla   San N… 16    163   16305      22     8.28  5.34e4\n 9 El Esfuer… Ñuble  Diguillín Bulnes 16    161   16102      11     0.632 4.05e3\n10 El Refugio Ñuble  Diguillín Bulnes 16    161   16102      16     1.11  7.10e3\n# ℹ 14 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\n\nEs posible realizar dos o más filtros de forma consecutiva:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  filter(hogares > 90, \n         hectareas > 30)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 18 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Parcela 11 Valpa… Valparaí… Viña … 05    051    5109     520      44.0 3.08e5\n 2 Manuel Bu… Valpa… Valparaí… Viña … 05    051    5109    1647      90.2 6.33e5\n 3 Reñaca Al… Valpa… Valparaí… Viña … 05    051    5109     663      39.1 2.75e5\n 4 Felipe Ca… Valpa… Valparaí… Viña … 05    051    5109     669      37.0 2.59e5\n 5 Aguas Sal… Valpa… San Anto… San A… 05    056    5601     688      45.1 3.12e5\n 6 Alto Mira… Valpa… San Anto… San A… 05    056    5601     560      47.7 3.30e5\n 7 Centinela… Valpa… San Anto… San A… 05    056    5601     833     111.  7.69e5\n 8 Rol 9034-1 Valpa… San Anto… San A… 05    056    5601     227      32.1 2.22e5\n 9 Vista Her… Valpa… San Anto… Carta… 05    056    5603     789      64.6 4.48e5\n10 El Colora… Valpa… Marga Ma… Limac… 05    058    5802     235      59.1 4.15e5\n11 Mirando l… Tarap… Iquique   Alto … 01    011    1107     164     114.  9.96e5\n12 Alto Molle Tarap… Iquique   Alto … 01    011    1107    3390     130.  1.14e6\n13 El Castaño Biobío Arauco    Curan… 08    082    8205      92      56.2 3.55e5\n14 Ribera De… Metro… Talagante Talag… 13    136   13601     115      37.8 2.61e5\n15 Jerusalén  Metro… Chacabuco Lampa  13    133   13302     565      32.1 2.24e5\n16 Las Minas… Biobío Arauco    Curan… 08    082    8205     100      88.3 5.58e5\n17 Villa El … Biobío Arauco    Curan… 08    082    8205     135     129.  8.16e5\n18 Ex Inia    Coqui… Choapa    Los V… 04    042    4203     315      36.6 2.63e5\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\n\nTambién es posible usar otros operadores dentro de las comparaciones, Tales como el operador _o_ `|`, que en este caso nos va a permitir filtrar las observaciones que cumplan con una o con otra condición:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  filter(hogares > 300 | hectareas > 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 33 × 12\n   nombre     region provincia comuna cut_r cut_p   cut hogares hectareas   area\n   <chr>      <chr>  <chr>     <chr>  <chr> <chr> <dbl>   <dbl>     <dbl>  <dbl>\n 1 Parcela 11 Valpa… Valparaí… Viña … 05    051    5109     520      44.0 3.08e5\n 2 Manuel Bu… Valpa… Valparaí… Viña … 05    051    5109    1647      90.2 6.33e5\n 3 Reñaca Al… Valpa… Valparaí… Viña … 05    051    5109     663      39.1 2.75e5\n 4 Felipe Ca… Valpa… Valparaí… Viña … 05    051    5109     669      37.0 2.59e5\n 5 Yevide     Valpa… San Feli… San F… 05    057    5701     306      13.4 9.45e4\n 6 Aguas Sal… Valpa… San Anto… San A… 05    056    5601     688      45.1 3.12e5\n 7 Alto Mira… Valpa… San Anto… San A… 05    056    5601     560      47.7 3.30e5\n 8 Centinela… Valpa… San Anto… San A… 05    056    5601     833     111.  7.69e5\n 9 Fuerza Gu… Valpa… San Anto… Carta… 05    056    5603     342      16.5 1.14e5\n10 Vista Her… Valpa… San Anto… Carta… 05    056    5603     789      64.6 4.48e5\n# ℹ 23 more rows\n# ℹ 2 more variables: observaciones <chr>, año <chr>\n```\n\n\n:::\n:::\n\nEl filtro anterior deja las filas donde los hogares sean mayores a 300, o bien, las hectáreas sean mayores a 100, pudiendo darse el caso de que hayan filas con hogares mayores 300 pero hectáreas menores de 100, o con menos de 300 hogares pero con más de 100 hectáreas.\n\nAplicando lo aprendido hasta el momento, podemos combinar un filtro con un conteo y un orden, así obtenemos un conteo de campamentos por comuna bajo un primer criterio de filtro, ordenados de mayor a menor:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |>\n  filter(hogares > 10) |> \n  count(comuna) |> \n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 177 × 2\n   comuna            n\n   <chr>         <int>\n 1 Viña del Mar    101\n 2 Valparaíso       89\n 3 Antofagasta      80\n 4 Copiapó          70\n 5 Alto Hospicio    42\n 6 Temuco           35\n 7 Lota             30\n 8 Talcahuano       26\n 9 San Antonio      22\n10 Lampa            21\n# ℹ 167 more rows\n```\n\n\n:::\n:::\n\n\n\n## Crear variables\nHasta ahora, hemos explorado solamente con los datos que vienen directamente desde el archivo que cargamos. A continuación, crearemos nuevas variables a partir de los datos existentes, para potenciar nuestro análisis.\n\nLa función `mutate()` crea nuevas variables. Lo primero que se indica dentro de `mutate()` es el nombre de la nueva variable que vamos a crear, después de un signo igual (`=`), y después la operación que creará esta nueva variable.\n\nEn este primer ejemplo, crearemos la variable `prueba`, que contendrá un texto en todas las filas.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |>\n  select(1:4, hogares) |> \n  mutate(prueba = \"hola\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 6\n   nombre                  region     provincia   comuna        hogares prueba\n   <chr>                   <chr>      <chr>       <chr>           <dbl> <chr> \n 1 Bellavista              Valparaíso Valparaíso  Valparaíso         29 hola  \n 2 Buena Vista             Valparaíso Valparaíso  Valparaíso         32 hola  \n 3 Los Fleteros            Valparaíso Valparaíso  Valparaíso         56 hola  \n 4 Pueblo Hundido          Valparaíso Valparaíso  Valparaíso         65 hola  \n 5 Villa Italia Turín      Valparaíso Valparaíso  Valparaíso         33 hola  \n 6 Nueva Esperanza         Valparaíso Valparaíso  Valparaíso         17 hola  \n 7 Francisco Vergara       Valparaíso Valparaíso  Valparaíso         24 hola  \n 8 Manuel Rodríguez        Valparaíso Valparaíso  Valparaíso         21 hola  \n 9 Sofia 35                Valparaíso Valparaíso  Valparaíso         69 hola  \n10 Las Viñas De Irene Frei Valparaíso Marga Marga Villa Alemana      32 hola  \n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\nUsamos la función `paste()` para crear una nueva variable que contenga un texto, al cual le agregamos la cifra de otra variable. La operación se realizará para cada una de las filas de nuestra tabla, utilizando las cifras que corresponda a la fila en cuestión:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(nombre, hogares) |> \n  mutate(texto = paste(\"Numero de hogares:\", hogares))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   nombre                  hogares texto                \n   <chr>                     <dbl> <chr>                \n 1 Bellavista                   29 Numero de hogares: 29\n 2 Buena Vista                  32 Numero de hogares: 32\n 3 Los Fleteros                 56 Numero de hogares: 56\n 4 Pueblo Hundido               65 Numero de hogares: 65\n 5 Villa Italia Turín           33 Numero de hogares: 33\n 6 Nueva Esperanza              17 Numero de hogares: 17\n 7 Francisco Vergara            24 Numero de hogares: 24\n 8 Manuel Rodríguez             21 Numero de hogares: 21\n 9 Sofia 35                     69 Numero de hogares: 69\n10 Las Viñas De Irene Frei      32 Numero de hogares: 32\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\nEs posible usar cualquier función que opere sobre una variable del tipo que corresponda. Por ejemplo, podemos redondear los valores de una variable numérica, y si a esta nueva variable creada le asignamos al mismo nombre de la variable original, la variable original será reemplazada por la versión nueva, con sus datos redondeados.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(nombre, where(is.numeric), -cut) |> \n  mutate(hectareas = round(hectareas, digits = 1),\n         area = round(area, digits = 0))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 4\n   nombre                  hogares hectareas  area\n   <chr>                     <dbl>     <dbl> <dbl>\n 1 Bellavista                   29       1.5 10617\n 2 Buena Vista                  32       1.7 11707\n 3 Los Fleteros                 56       2.5 17465\n 4 Pueblo Hundido               65       4.6 32261\n 5 Villa Italia Turín           33       0.9  6081\n 6 Nueva Esperanza              17       0.4  2802\n 7 Francisco Vergara            24       2.8 19955\n 8 Manuel Rodríguez             21       0.4  3103\n 9 Sofia 35                     69       2.7 18819\n10 Las Viñas De Irene Frei      32       1.2  8704\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\nTambién podemos crear una nueva variable a partir de un cálculo matemático:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(nombre, where(is.numeric), -cut) |> \n  mutate(densidad = hectareas/hogares)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 5\n   nombre                  hogares hectareas   area densidad\n   <chr>                     <dbl>     <dbl>  <dbl>    <dbl>\n 1 Bellavista                   29     1.51  10617.   0.0522\n 2 Buena Vista                  32     1.67  11707.   0.0522\n 3 Los Fleteros                 56     2.49  17465.   0.0445\n 4 Pueblo Hundido               65     4.60  32261.   0.0708\n 5 Villa Italia Turín           33     0.867  6081.   0.0263\n 6 Nueva Esperanza              17     0.399  2802.   0.0235\n 7 Francisco Vergara            24     2.85  19955.   0.119 \n 8 Manuel Rodríguez             21     0.443  3103.   0.0211\n 9 Sofia 35                     69     2.68  18819.   0.0389\n10 Las Viñas De Irene Frei      32     1.24   8704.   0.0388\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\nSi creamos una nueva variable en base a una comparación (en este caso, que las hectáreas sean mayores a 2), entonces la nueva variable será de tipo lógico, indicando las observaciones que cumplen con la comparación con `TRUE`, y las que no con `FALSE`.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(nombre, hectareas) |> \n  mutate(prioridad = hectareas > 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   nombre                  hectareas prioridad\n   <chr>                       <dbl> <lgl>    \n 1 Bellavista                  1.51  FALSE    \n 2 Buena Vista                 1.67  FALSE    \n 3 Los Fleteros                2.49  TRUE     \n 4 Pueblo Hundido              4.60  TRUE     \n 5 Villa Italia Turín          0.867 FALSE    \n 6 Nueva Esperanza             0.399 FALSE    \n 7 Francisco Vergara           2.85  TRUE     \n 8 Manuel Rodríguez            0.443 FALSE    \n 9 Sofia 35                    2.68  TRUE     \n10 Las Viñas De Irene Frei     1.24  FALSE    \n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\nSi lo pensamos, ésta es la misma forma mediante la cual funciona la función `filter()`: se establece una comparación, se evalúa si cada una de las filas cumple con la comparación, y finalmente se eliminan las que no cumplen (`FALSE`).\n\n### Variables dicotómicas con `if_else()`\n\nSiguiendo la lógica del ejemplo anterior, podemos usar una función que nos ayude a crear variables en base a si las filas cumplen o no con una o varias condiciones que definamos. A esta operación se llama _if else,_ que en español sería _si se cumple, entonces esto, y si no, esto otro._\n\nEntonces, podemos usar `if_else()` para crear nuevas variables en base a una comparación, pero en vez de retornar verdadero o falso, puede retornar los valores que nosotros le pidamos.\n\n_Ejemplo:_\n\n::: {.cell}\n\n```{.r .cell-code}\nplata <- 1000000\n\nplata < 300000\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\n# una comparación normal retorna TRUE o FALSE\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# pero en el ifelse, le especificamos primero la comparación,\n# luego lo que queremos que retorne si la comparación es TRUE,\n# y finalmente lo que queremos que retorne si es false\nif_else(plata < 300000, true = \"poca\", false = \"mucha\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"mucha\"\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# también se puede escribir obviando el \"yes\" y \"no\"\nif_else(plata < 300000, \"poca\", \"mucha\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"mucha\"\n```\n\n\n:::\n:::\n\n\nSiguiendo el ejemplo, podemos usar la función dentro de mutate para crear nuestra nueva variable dicotómica:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |>\n  select(nombre, hogares) |> \n  mutate(tipo = if_else(hogares > 40, \n                        true = \"grande\", \n                        false = \"chico\")\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   nombre                  hogares tipo  \n   <chr>                     <dbl> <chr> \n 1 Bellavista                   29 chico \n 2 Buena Vista                  32 chico \n 3 Los Fleteros                 56 grande\n 4 Pueblo Hundido               65 grande\n 5 Villa Italia Turín           33 chico \n 6 Nueva Esperanza              17 chico \n 7 Francisco Vergara            24 chico \n 8 Manuel Rodríguez             21 chico \n 9 Sofia 35                     69 grande\n10 Las Viñas De Irene Frei      32 chico \n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\n_Otro ejemplo:_\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos |> \n  select(nombre, region, hectareas) |> \n  mutate(prioridad = if_else(hectareas > 2, \"alta\", \"normal\")) |> \n  count(region, prioridad)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 31 × 3\n   region                                    prioridad     n\n   <chr>                                     <chr>     <int>\n 1 Antofagasta                               alta         45\n 2 Antofagasta                               normal       71\n 3 Arica y Parinacota                        alta          8\n 4 Arica y Parinacota                        normal        6\n 5 Atacama                                   alta         45\n 6 Atacama                                   normal       76\n 7 Aysén del General Carlos Ibáñez del Campo alta          3\n 8 Aysén del General Carlos Ibáñez del Campo normal        7\n 9 Biobío                                    alta        128\n10 Biobío                                    normal       97\n# ℹ 21 more rows\n```\n\n\n:::\n:::\n\n\nPara los siguientes ejemplos, crearemos un nuevo dataframe en base al anterior, pero que contenga nuevas variables creadas mediante operaciones matemáticas:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_2 <- datos |> \n  mutate(densidad_ha = hectareas / hogares,\n         area_km = area/1000,\n         densidad_km = area_km / hogares)\n```\n:::\n\n\n### Variables más complejas con `case_when()`\nLa función `case_when()` es equivalente a usar varios `if_else()` seguidos, y por lo tanto nos permite crear variables más complejas, que tengan más de dos categorías. Se utiliza poniendo todas las evaluaciones junto al valor que queremos que adopten si es que estas comparaciones son `TRUE`.\n\nComo prueba, vamos a incluir una sola comparación, para ver que le otorga el valor solo a las observaciones correspondientes, y las demás las deja vacías:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_2 |> \n  select(nombre, densidad_km) |> \n  mutate(categoria = case_when(densidad_km < 0.3 ~ \"baja\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   nombre                  densidad_km categoria\n   <chr>                         <dbl> <chr>    \n 1 Bellavista                    0.366 <NA>     \n 2 Buena Vista                   0.366 <NA>     \n 3 Los Fleteros                  0.312 <NA>     \n 4 Pueblo Hundido                0.496 <NA>     \n 5 Villa Italia Turín            0.184 baja     \n 6 Nueva Esperanza               0.165 baja     \n 7 Francisco Vergara             0.831 <NA>     \n 8 Manuel Rodríguez              0.148 baja     \n 9 Sofia 35                      0.273 baja     \n10 Las Viñas De Irene Frei       0.272 baja     \n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\nEl orden en que ponemos las comparaciones será importante, porque se ejecutan en el orden que las escribas, así que una vez que una fila adquiere un valor, la fila deja de ser evaluada en las siguientes comparaciones.\n\nEl siguiente ejemplo usa tres comparaciones para abarcar todo el rango de números de la variable `hogares`:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_2 |> \n  select(nombre, hogares) |> \n  mutate(tamaño = case_when(hogares > 60 ~ \"grande\",\n                            hogares > 30 ~ \"mediano\",\n                            hogares <= 30 ~ \"chico\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   nombre                  hogares tamaño \n   <chr>                     <dbl> <chr>  \n 1 Bellavista                   29 chico  \n 2 Buena Vista                  32 mediano\n 3 Los Fleteros                 56 mediano\n 4 Pueblo Hundido               65 grande \n 5 Villa Italia Turín           33 mediano\n 6 Nueva Esperanza              17 chico  \n 7 Francisco Vergara            24 chico  \n 8 Manuel Rodríguez             21 chico  \n 9 Sofia 35                     69 grande \n10 Las Viñas De Irene Frei      32 mediano\n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\n_Otro ejemplo:_\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_2 |> \n  select(nombre, densidad_km) |> \n  mutate(categoria = case_when(densidad_km < 0.3 ~ \"baja\",\n                               densidad_km < 0.6 ~ \"media\",\n                               densidad_km < 0.9 ~ \"alta\",\n                               densidad_km >= 0.9 ~ \"muy alta\"\n  ))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 3\n   nombre                  densidad_km categoria\n   <chr>                         <dbl> <chr>    \n 1 Bellavista                    0.366 media    \n 2 Buena Vista                   0.366 media    \n 3 Los Fleteros                  0.312 media    \n 4 Pueblo Hundido                0.496 media    \n 5 Villa Italia Turín            0.184 baja     \n 6 Nueva Esperanza               0.165 baja     \n 7 Francisco Vergara             0.831 alta     \n 8 Manuel Rodríguez              0.148 baja     \n 9 Sofia 35                      0.273 baja     \n10 Las Viñas De Irene Frei       0.272 baja     \n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\nEn el ejemplo anterior, usamos comparaciones que proponen un valor numérico, y coinciden con los valores inferiores al valor que pusimos. Entonces, el orden de asignación de los valores para la nueva variable va de menor a mayor: de 0.3 para abajo, de 0.6 para abajo, de 0.9 para abajo. Lo importante es entender que, una vez que una observación adquiere su etiqueta, las demás comparaciones no la van a sobreescribir. Por ejemplo, si tenemos el valor 0.2, va a ser etiquetado por la comparación _\"valores menores a 0.3\",_ porque es menor a 0.3. Pero cuando se aplique la siguiente comparación, que es _\"valores menores a 0.6\",_ a pesar de que 0.2 también es menor a 0.6, no va a recibir una nueva etiqueta, porque ya obtuvo una en la comparación anterior (menores a 0.3).\n\nLas comparaciones también pueden combinarse para volverse más específicas. En el siguiente ejemplo definiremos no solamente si son menores a un valor, sino que definimos un rango de valores:\n- mayores a 0 y menores a 3\n- mayores o iguales a 0.3 y menores a 0.6\n- etc\n\nPodemos especificar el argumento `.default` para que le otorgue a un valor a \"todos los demás\"; es decir, a los valores que no coincidieron con ninguna de las condiciones dadas.\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_2 |>\n  mutate(categoria = case_when(densidad_km > 0 & densidad_km < 0.3 ~ \"baja\",\n                               densidad_km >= 0.3 & densidad_km < 0.6 ~ \"media\",\n                               densidad_km >= 0.6 & densidad_km < 0.9 ~ \"alta\",\n                               .default = \"desconocido\")) |>\n  select(nombre, densidad_km, categoria) |> \n  filter(categoria != \"desconocido\") |>\n  print(n = 15)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,066 × 3\n   nombre                              densidad_km categoria\n   <chr>                                     <dbl> <chr>    \n 1 Bellavista                                0.366 media    \n 2 Buena Vista                               0.366 media    \n 3 Los Fleteros                              0.312 media    \n 4 Pueblo Hundido                            0.496 media    \n 5 Villa Italia Turín                        0.184 baja     \n 6 Nueva Esperanza                           0.165 baja     \n 7 Francisco Vergara                         0.831 alta     \n 8 Manuel Rodríguez                          0.148 baja     \n 9 Sofia 35                                  0.273 baja     \n10 Las Viñas De Irene Frei                   0.272 baja     \n11 Lomas De Bellavista                       0.662 alta     \n12 Manzana 33                                0.414 media    \n13 Ampliación Prat-Lomas De Peñablanca       0.723 alta     \n14 Los Artesanos                             0.401 media    \n15 La Unión - Elías Lafferte                 0.465 media    \n# ℹ 1,051 more rows\n```\n\n\n:::\n:::\n\n\nFinalmente, `case_when()` nos permite crear cualquier tipo de comparación arbitraria, usando cualquier columna de nuestro dataframe; por ejemplo, en este caso vamos a etiquetar una variable sobre densidad, pero podemos condicionar cierta densidad con una región. En este ejemplo (solo con fines ilustrativos), las observaciones que son de Valparaíso _no_ pueden ser categorizadas como altas:\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_2 |>\n  mutate(categoria = case_when(densidad_km > 0 & densidad_km < 0.3 ~ \"baja\",\n                               densidad_km >= 0.3 & densidad_km < 0.6 ~ \"media\",\n                               region != \"Valparaíso\" & densidad_km >= 0.6 & densidad_km < 0.9 ~ \"alta\")) |> \n  select(nombre, region, densidad_km, categoria)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,432 × 4\n   nombre                  region     densidad_km categoria\n   <chr>                   <chr>            <dbl> <chr>    \n 1 Bellavista              Valparaíso       0.366 media    \n 2 Buena Vista             Valparaíso       0.366 media    \n 3 Los Fleteros            Valparaíso       0.312 media    \n 4 Pueblo Hundido          Valparaíso       0.496 media    \n 5 Villa Italia Turín      Valparaíso       0.184 baja     \n 6 Nueva Esperanza         Valparaíso       0.165 baja     \n 7 Francisco Vergara       Valparaíso       0.831 <NA>     \n 8 Manuel Rodríguez        Valparaíso       0.148 baja     \n 9 Sofia 35                Valparaíso       0.273 baja     \n10 Las Viñas De Irene Frei Valparaíso       0.272 baja     \n# ℹ 1,422 more rows\n```\n\n\n:::\n:::\n\n\n\n## Pivotar\n\nCreamos una pequeña tabla de conteo de casos a partir de dos variables de agrupación: la región y el tamaño.\n\n::: {.cell}\n\n```{.r .cell-code}\ntabla <- datos_2 |> \n  mutate(tamaño = case_when(hogares > 60 ~ \"grande\",\n                            hogares > 30 ~ \"mediano\",\n                            .default = \"chico\")) |> \n  count(region, tamaño)\n\ntabla\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 47 × 3\n   region                                    tamaño      n\n   <chr>                                     <chr>   <int>\n 1 Antofagasta                               chico      42\n 2 Antofagasta                               grande     52\n 3 Antofagasta                               mediano    22\n 4 Arica y Parinacota                        chico       4\n 5 Arica y Parinacota                        grande      6\n 6 Arica y Parinacota                        mediano     4\n 7 Atacama                                   chico      62\n 8 Atacama                                   grande     29\n 9 Atacama                                   mediano    30\n10 Aysén del General Carlos Ibáñez del Campo chico       7\n# ℹ 37 more rows\n```\n\n\n:::\n:::\n\nEn esta tabla, cada fila corresponde a una observación distinta; es decir, cada fila adquiere exactamente sólo un valor posible de cada una de las variables. Al mismo tiempo, cada columna solamente corresponde a una variable específica, y cada celda de la tabla solamente aloja un valor. Por ejemplo, en la primera fila, la _región_ es \"Antofagasta\", el _tamaño_ es \"chico\", y `n` es _42._ A esto se le denomina _formato largo_ o _Tidy,_ y [es un principio básico de mantener para el análisis de datos.](https://tidyr.tidyverse.org/articles/tidy-data.html#tidy-data)\n\nSin embargo, al momento de compartir o publicar los datos, estas convenciones sobre ordenamiento de los datos dejan de ser prioridad. Usualmente, en las tablas destinadas para revisar o entregar resultados,\nlas variables numéricas que están agrupadas por otras variables (_región_ y _tamaño,_ en nuestro ejemplo) suelen presentarse con cada una de las categorías de agrupación en una columna distinta. Entonces, Antofagasta ya no usaría tres filas, sino una sola fila, pero habrían tres columnas que correspondían al tamaño, chico mediano y grande, cada una de esas celdas es conteniendo el valor numérico correspondiente. Entonces, terminaríamos con un DataFramed donde cada región corresponda a una fila, y en cada fila habrán tres valores, cada uno correspondiendo a la categoría de la variable tamaño correspondiente.\n\nPara realizar esta [transformación de la estructura de los datos,](https://rstudio.github.io/cheatsheets/html/tidyr.html#reshape-data) cargaremos el paquete `{tidyr}`:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyr)\n```\n:::\n\n\nLa operación que necesitamos realizar es pivotar la tabla a un formato ancho. Para esto, definimos que _variable_ nos entregará los nombres de las nuevas columnas (en este ejemplo, el _tamaño_), y desde qué variable se sacarán los valores que se ubicarán en cada una de las columnas nuevas:\n\n::: {.cell}\n\n```{.r .cell-code}\ntabla_ancha <- tabla |> \n  pivot_wider(names_from = tamaño, \n              values_from = n, \n              values_fill = 0) |> \n  relocate(mediano, .after = chico)\n\ntabla_ancha\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 16 × 4\n   region                                    chico mediano grande\n   <chr>                                     <int>   <int>  <int>\n 1 Antofagasta                                  42      22     52\n 2 Arica y Parinacota                            4       4      6\n 3 Atacama                                      62      30     29\n 4 Aysén del General Carlos Ibáñez del Campo     7       2      1\n 5 Biobío                                      116      61     48\n 6 Coquimbo                                     30      12     10\n 7 La Araucanía                                 48      19      3\n 8 Libertador General Bernardo O'Higgins        49       6      4\n 9 Los Lagos                                    35      17     15\n10 Los Ríos                                     27       6      7\n11 Magallanes y de la Antártica Chilena          0       2      1\n12 Maule                                        22       2      1\n13 Metropolitana                                89      28     51\n14 Tarapacá                                     13      14     37\n15 Valparaíso                                  209      79     86\n16 Ñuble                                        20       3      1\n```\n\n\n:::\n:::\n\nDe esta forma, obtenemos una tabla más compacta, que nos permite visualizar los datos de una forma más sencilla.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gt)\n\ngt(tabla_ancha) |> \n  gt::tab_header(title = \"Campamentos según tamaño\") |>  \n  cols_label(region = \"Región\") |> \n  tab_style(locations = cells_body(region), \n            style = cell_text(style = \"italic\"))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"hghicvnvdk\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hghicvnvdk table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hghicvnvdk thead, #hghicvnvdk tbody, #hghicvnvdk tfoot, #hghicvnvdk tr, #hghicvnvdk td, #hghicvnvdk th {\n  border-style: none;\n}\n\n#hghicvnvdk p {\n  margin: 0;\n  padding: 0;\n}\n\n#hghicvnvdk .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hghicvnvdk .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hghicvnvdk .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hghicvnvdk .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hghicvnvdk .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hghicvnvdk .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hghicvnvdk .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hghicvnvdk .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hghicvnvdk .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hghicvnvdk .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hghicvnvdk .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hghicvnvdk .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hghicvnvdk .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hghicvnvdk .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hghicvnvdk .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hghicvnvdk .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hghicvnvdk .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hghicvnvdk .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hghicvnvdk .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hghicvnvdk .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hghicvnvdk .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hghicvnvdk .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hghicvnvdk .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hghicvnvdk .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hghicvnvdk .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hghicvnvdk .gt_left {\n  text-align: left;\n}\n\n#hghicvnvdk .gt_center {\n  text-align: center;\n}\n\n#hghicvnvdk .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hghicvnvdk .gt_font_normal {\n  font-weight: normal;\n}\n\n#hghicvnvdk .gt_font_bold {\n  font-weight: bold;\n}\n\n#hghicvnvdk .gt_font_italic {\n  font-style: italic;\n}\n\n#hghicvnvdk .gt_super {\n  font-size: 65%;\n}\n\n#hghicvnvdk .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hghicvnvdk .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hghicvnvdk .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hghicvnvdk .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hghicvnvdk .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hghicvnvdk .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hghicvnvdk .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#hghicvnvdk .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#hghicvnvdk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Campamentos según tamaño</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"region\">Región</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"chico\">chico</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mediano\">mediano</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"grande\">grande</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Antofagasta</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">42</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">22</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">52</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Arica y Parinacota</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">4</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">4</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">6</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Atacama</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">62</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">30</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">29</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Aysén del General Carlos Ibáñez del Campo</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">7</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">2</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Biobío</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">116</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">61</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">48</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Coquimbo</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">30</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">12</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">10</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">La Araucanía</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">48</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">19</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">3</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Libertador General Bernardo O'Higgins</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">49</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">6</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">4</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Los Lagos</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">35</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">17</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">15</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Los Ríos</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">27</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">6</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">7</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Magallanes y de la Antártica Chilena</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">0</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">2</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Maule</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">22</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">2</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Metropolitana</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">89</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">28</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">51</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Tarapacá</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">13</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">14</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">37</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Valparaíso</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">209</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">79</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">86</td></tr>\n    <tr><td headers=\"region\" class=\"gt_row gt_left\" style=\"font-style: italic;\">Ñuble</td>\n<td headers=\"chico\" class=\"gt_row gt_right\">20</td>\n<td headers=\"mediano\" class=\"gt_row gt_right\">3</td>\n<td headers=\"grande\" class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Guardar en Excel\n\nGuardar una tabla o dataframe de R en formato Excel es tan sencillo como utilizar la función `write_xlsx()` y entregarle el objeto y el nombre del archivo que queremos crear.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(writexl)\nwrite_xlsx(tabla_ancha, \"tabla_campamentos.xlsx\")\n```\n:::\n\n\nCon esto concluye este tutorial inicial para manipular datos con el paquete `{dplyr}`. En siguientes tutoriales iremos usando funciones más complejas y avanzadas! 🫣\n\n\n----\n\nSi este tutorial te sirvió, por favor considera hacerme una donación! Cualquier monto me ayuda al menos a poder tomarme un cafecito 🥺\n\n\n{{< cafecito >}}\n\n{{< cursos >}}",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}
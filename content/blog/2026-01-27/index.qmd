---
title: "Por qu칠 siempre visualizar los datos: el cuarteto de Anscombe"
author: Basti치n Olea Herrera
date: '2026-01-27'
slug: []
categories: []
draft: false
tags:
  - curiosidades
  - b치sico
  - estad칤sticas
  - visualizaci칩n de datos
format:
  hugo-md:
    output-file: index
    output-ext: md
excerpt: Uno de los primeros pasos al trabajar con datos es explorarlos, y si bien hay formas de resumir los datos y obtener medidas que los describan, no olvidemos que visualizar los datos es igual de importante que obtener sus estad칤sticas descriptivas. Ejemplifiquemos esto con un caso cl치sico!
---

Uno de los primeros pasos al trabajar con datos es explorarlos, y si bien existen [herramientas estad칤sticas para resumir datos y obtener medidas que los describan](/blog/r_introduccion/dplyr_summarize/), debemos recordar que **visualizar los datos es igual de importante que obtener sus estad칤sticas descriptivas** 游뱚

Veamos un ejemplo cl치sico de 칠sto: el [cuarteto de Anscombe](https://es.wikipedia.org/wiki/Cuarteto_de_Anscombe). Este conjunto de datos, creado por Francis John Anscombe en 1973, est치 compuesto por cuatro grupos distintos, con **las mismas estad칤sticas descriptivas** (media, varianza, correlaci칩n y regresi칩n lineal), pero que **al visualizarlos revelan distribuciones muy diferentes**!

El cuarteto de Anscombe viene por defecto en R:

```{r}
datasets::anscombe
```

Vemos que hay 8 columnas, aparentemente en dos pares de 4 columnas: las que corresponden al _eje x_ de cada grupo, y las del _eje y_.

Si encuentras que los datos est치n **desordenados**, es porque s칤, vienen desordenados 游

## Limpiar datos

Los datos tienen un problema com칰n: las columnas contienen en sus nombres informaci칩n que deber칤an ser datos (la variable y el grupo al que pertenece). Esto se ven en que, por ejemplo, la columna `x1` te dice dos cosas a la vez: que la variable se llama `x`, y que pertenece al grupo `1` 游뗷

Ordenemos un poco estos datos [llev치ndolos al **formato largo,**](/blog/r_introduccion/tidyr_pivotar/) para hacer que cada fila represente una observaci칩n individual, y que cada columna presente una sola cosa a la vez:

```{r}
#| message: false
library(dplyr)
library(tidyr)

anscombe_largo <- anscombe |> 
  pivot_longer(cols = everything(),
               names_to = "grupo",
               values_to = "valor") |> 
  separate(grupo, sep = 1, into = c("variable", "grupo"))

anscombe_largo
```

Usamos `pivot_longer()` para _pivotar_ los datos y hacer que todas las cifras est칠n en una sola columna, y los nombres de todas las columnas en otra. Luego usamos `separate()` para separar la columna `grupo` en dos: una con la `variable`, y otra con el `grupo`. Mucho mejor! 驕쥞잺

{{< info "Si quieres aprender en detalle c칩mo **transformar datos** para cambiarlos dal formato largo o anch, revisa este tutorial sobre [pivotar datos con `{tidyr}`](/blog/r_introduccion/tidyr_pivotar/)." >}}

## Calcular estad칤sticos descriptivos
Con los datos ordenados, tenemos todas las cifras en una sola columna. Ahora podemos calcular sus **estad칤sticos descriptivos** con `summarize()`. Esto nos permite calcular, por ejemplo, un promedio de todas las observaciones. Pero como los datos vienen en grupos, agrupamos primero con `group_by()`:

```{r}
estadisticos <- anscombe_largo |> 
  group_by(grupo) |> 
  summarize(promedio = mean(valor),
            mediana = median(valor),
            varianza = var(valor))

```

```{r}
#| echo: false
knitr::kable(estadisticos)
```

Al calcular algunos estad칤sticos descriptivos (**promedio**, **mediana** y **varianza**) confirmamos que los cuatro grupos del cuarteto tienen cifras casi id칠nticas!

{{< info "Para aprender a calcular **estad칤sticos descriptivos**, revisa este tutorial sobre [res칰menes de datos con `{dplyr}`](/blog/r_introduccion/dplyr_summarize/)." >}}

## Visualizar los datos

Para comparar los grupos del cuarteto de Anscombe, queremos graficar un [gr치fico de dispersi칩n](/blog/r_introduccion/tutorial_visualizacion_ggplot/#dispersi칩n-1), y para eso necesitamos tener los valores del _eje x_ e _y_ en columnas distintas. Actualmente est치n en una sola columna (`valor`), y se distinguen por el valor de la columna `variable`, as칤 que podemos [usar `pivot_wider()` para volver a pivotar los datos hacia el **formato ancho**](/blog/r_introduccion/tidyr_pivotar/#desde-largo-hacia-ancho), y pasar de una columna descrita por otra, a dos columnas con nombres distintos:

```{r}
# crear identificaci칩n 칰nica de cada valor del conjunto
anscombe_ids <- anscombe_largo |> 
  group_by(grupo, variable) |>
  mutate(id = row_number()) |> 
  ungroup()

# pivotar los valores hacia el ancho, creando dos columnas seg칰n `variable`
anscombe_ancho <- anscombe_ids |> 
  pivot_wider(names_from = variable, values_from = valor) |> 
  arrange(grupo, id) |> # ordenar
  select(-id) # sacar variable id

anscombe_ancho
```

Ahora los datos est치n en un formato mucho m치s simple e intuitivo: cada fila es una observaci칩n, separadas por la variable `grupo`, cuyos valores est치n en las columnas `x` e `y`.

Para visualizar los datos cargamos `{ggplot2}`:
 
```{r}
library(ggplot2)
```

Antes definimos algunas cositas para que el gr치fico se vea bonito:

{{< detalles "**Ver c칩digo de temas y tipograf칤as**">}}

```{r}
#| message: false
library(showtext)

# descargar una tipograf칤a desde google fonts
font_add_google(name = "Atkinson Hyperlegible")
showtext_auto()
showtext_opts(dpi = 200)

# aplicar tema de colores
theme_set(
  theme_grey(paper = "#EAD2FA",
             ink = "#6E3A98",
             accent = "#9069C0",
             base_family = "Atkinson Hyperlegible")
)
```

{{< /detalles >}}

Al graficar los datos de cada grupo, podemos ver que las distribuciones son muy diferentes entre s칤, a pesar de tener estad칤sticas descriptivas similares.

```{r}
anscombe_ancho |> 
  ggplot() +
  aes(x, y) +
  # l칤nea de regresi칩n
  geom_smooth(method = "lm", se = FALSE, 
              fullrange = T, 
              color = alpha("#9069C0", 0.6)) +
  # puntitos   
  geom_point(size = 2.5, 
             alpha = 0.8) +
  # separar grupos en gr치ficos distintos
  facet_wrap(~grupo,
             labeller = as_labeller(~glue::glue("Grupo {.x}"))) +
  # textos
  labs(title = "Cuarteto de Anscombe",
       subtitle = "Conjuntos de datos con mismas estad칤sticas pero distintas distribuciones") +
  # t칤tulo en negrita
  theme(plot.title = element_text(size = 14, face = "bold"))
```

{{< info "Para aprender a crear gr치ficos con `{ggplot2}`, revisa este tutorial sobre [visualizaci칩n de datos con `{ggplot2}`](/blog/r_introduccion/tutorial_visualizacion_ggplot/)." >}}

Si nos hubi칠ramos quedado con las estad칤sticas descriptivas, habr칤amos pasado por alto las diferencias entre los grupos! _Moraleja:_ siempre hacer gr치ficos exploratorios para comprender con qu칠 estamos trabajando.

{{< cafecito >}}

{{< cursos >}}


```{r}
#| eval: false
#| fig-width: 3.5
#| fig-height: 3
#| fig-dpi: 200

anscombe_ancho |>
  filter(grupo == 2) |> 
  ggplot() +
  aes(x, y) +
  # l칤nea de regresi칩n
  geom_smooth(method = "lm", se = FALSE, 
              fullrange = T, 
              color = alpha("#9069C0", 0.6)) +
  # puntitos   
  geom_point(size = 2.5, 
             alpha = 0.8)
```

